'From Smalltalk 5.5bXM July 4 on 8 August 1979 at 2:50:47 pm.'\g"EchoServer"l15000z20000\f5bgClass new title: 'EchoServer'	subclassof: Socket	fields: 'in out'	declare: '';	asFollows\f5bgAn Echo Server merely sits listening on a well-known socket,bouncing echo requests back to the source.This is a sub-class of socket, with a specialized way to process an input\igInitialization\f5bginit "Start listening on socket 5"	[	in _ out _ 0.	self  from: (Int32 new high: 0 low: 5).	]\gb5BHandle Input\f5bgsocProcess: Ipac | tempPort "Overwrite from def. of regular socket"	[	"we are running at a higher level ......"	in _ in + 1.	Ipac pupType = 1 		[		Ipac pupType _ 2.		Ipac swapPorts.		self completePup: Ipac.		out _ out+1.		]	"got something really funny"	self freePacket:  Ipac	]\gb17BStatistics\f5bgin [in]\gb3Bout [out]\gb4Bprinton: strm 	[	strm cr.	strm append: 'Echo server, '.	in printon: strm.	strm append: ' in and '.	out printon: strm.	strm append: ' out.'	]\gb16Breset [in_out_0]\gb6B\gSystemOrganization classify: EchoServer under: 'Ethernet Control'.\g"EchoUser"l15000z20000\f5bgClass new title: 'EchoUser'	subclassof: Socket	fields: 'ID out in inGood inBad'	declare: '';	asFollows\f5bgThis class has not yet been commented\igInitialization\f5bgnet: net host: host	[	ID_ Int32 new high: 0 low: 0.	in_inGood _ inBad_out_0.	self  net: net host: host soc: (Int32 new high: 0 low: 5).	]\gb21BHandle Input\f5bgsocProcess: Ipac |  i   "Overwrite from def. of regular socket"	[	"got some sort of answer"	in_in+1.	i _ Ipac pupType.	[i = 2  		[inGood_inGood+1 ]].	[i = 3  		[inBad _ inBad + 1 ]].	self freePacket: Ipac.	]\gb17BHandle Output\f5bgsend | pac "short comment"	["long comment if necessary"	pac _ self freePacket		[		out_out+1.		pac pupID_ ID_ ID+(Int32 new high: 0 low: 1).		pac pupType _ 1.		pac dataString _ ''.		self setAddressesAndComplete: pac.		self freePacket: pac.		]	user show: 'freeQ empty, in Echo User'	]\gb5BStatistics\f5bgprinton: strm 	[	strm cr.	strm append: 'Echo user, '.	out printon: strm.	strm append: ' out; received '.	in printon: strm.	strm append: ' in / '.	inGood printon: strm.	strm append: ' OK / '.	inBad printon: strm.	strm append: ' not OK.'.	]\gb16Breset [in_inGood_inBad_out_0]\gb6B\gSystemOrganization classify: EchoUser under: 'Ethernet Control'.\g