-- File:  EstimateBits.mesa: Calculate the number of alto pages a press.bits takes.e1(1792)\i-- Last Edited:  March 1, 1982  5:04 PM   By:  GWilliams e1\i--Added lookup of DiskDescriptor.DIRECTORYe1\2i31IAltoFileDefs USING [KD],l4269d3634e1k72(635)IODefs USING[CR, ReadChar, ReadDecimal, WriteChar, WriteDecimal, WriteLine, WriteString],l4269d3634e1k72\63i1IStreamDefs USING [DefaultAccess, NewWordStream, DiskHandle, ReadBlock];l4269d3634e1k72e1(1792)\bPressBitsEstimate: PROGRAMe1\b17BIMPORTS IODefs, StreamDefsl4904d3634e1k72(635) =l3633e1(1792)l3633d2998e1BEGIN OPEN AltoFileDefs, IODefs, StreamDefs;l3633d2998e1Main: PROC[]=BEGIN	nBands, firstBand, lastBand, scanLen, wordsPerBand, kPerBand, tridentPages: CARDINAL;	bandWidth: CARDINAL = 16;	descriptorH: DiskHandle;	kD: KD;	kDPtr: POINTER TO KD _ @kD;	wordsRead: CARDINAL;	WriteLine["Enter all numbers in decimal."L];	WriteString["First Band: "L];	firstBand _ ReadDecimal[]; WriteChar[CR];	WriteString["Last Band: "L];	lastBand _ ReadDecimal[]; WriteChar[CR];	WriteString["Scan line length: "L];	scanLen _ ReadDecimal[]; WriteChar[CR];	nBands _ (lastBand-firstBand) + 1;	wordsPerBand _ scanLen*bandWidth;	kPerBand _ (wordsPerBand/1024)+1;	tridentPages _ kPerBand*nBands + 1;--the +1 for leader page	descriptorH _ NewWordStream["DiskDescriptor", DefaultAccess];	[wordsRead]  _ ReadBlock[descriptorH, kDPtr, SIZE[KD]];	WriteString["This bits file will use "L];	WriteDecimal[tridentPages*4];	WriteLine[" Alto pages."L];	WriteString["Grab pages from server until disk pages = "L];	WriteDecimal[kDPtr.freePages - (tridentPages*4)];	WriteChar[CR];	WriteLine["Type any key to exit."L];	[] _ ReadChar[];	descriptorH.destroy[descriptorH];END;Main[];END. l2999e7k72(635)\i1bI4B631i24I467i1I-- Last Edited:  February 24, 1982  4:04 PM   By:  GWilliams e1(1792)\i--Created.(635)\2i8I