XEROXPALO ALTO RESEARCH CENTER3333 Coyote Hill RoadPalo Alto   California 94304Jasmine Scanner ManualBY Joe MalesonVersion of August 11, 1980[IVY]<Jasmine>Docs>JasmineManual.PRESSThis is the manual for Jasmine, a low-cost experimental optical scanner which operates at amaximum resolution of 96 8-bit samples per inch.  It is intended to contain all the informationnecessary to build hardware and software interfaces, and to understand the scanner electronics.  eN?;99A>BHKMLGCA?9?66@[a_XRSPLQQ^gqthXKINWODDFLIBIA:>0-424//4/-%.HNQFED>IINSMPXMT`S>WWSUSbSX[^MVVPWQCb`VZRTKKcSaZSHUXORe\YUOKFIPKGIIF@B?C5;C5437414-.164:="$.&(4<@CIRJLFCHEA=9<8NPPQG=<IELNKPQOOWNJPSRYY[MW^\KPWTUXEiaU\^UKLeTe[NNUXYYh\ZPGFF@SJEMM@CJ7A6;7455?:50&&1/108¾w"(&%3<>FDOJHGB?;=>A<7MVTJJ@BJHFNVZXMRSDFX`T\RVNV__NNVTTVJjYSW]PDHcYa]YRSSW`fVVTECMESNGLE<?D=98<3234?361+(0,922vj",&"26@EEMJEBD@=;?;76OOZRKDFJKRP\SZKQTFQY[V^S_RW]_LUZVX\UsfZ]`ROQiVeeYQTOYZfURUE=C?OIFOJD:@>3;E3167;321/.22123Kſo$(+#$59CJLKKB@GDBA=@;6OU\OIBJLGIO]S`JRUKCSXNYP\P^^ePV\]_\]nb^aW\UXjUb_MHVZ^]m\WQA?RGZVDHEC:CA9=8095A@7540/89039AȾŽc#0,).27HNNPPBHEEEDBA82INXKKFKKNLMXWZQXXIJURMWZ^SacbMZ^ao^dmbccX_NQkSi^UHUPa^bZUWDCJKZN>GLF5HB7G:250=:992)-86228=[%2(&-8;UQMJHDBCA?C==<8KOQLKMOJIFFXTYIORMUWSJVWWL_\dTW`fthjebdcZ^OMbU^[URNZ_Zd[ZYGGRITP?HNI4CH>H<372?=77404:83.9C\˼Q$/*'/?DNIKMKDAFC?CA:82EIRMABKOFKGZRQIRHDHIRLQXRS`Y_QWa`m_ccc`_WXML]TbcRIPT[XaUUZLAJEPO6>II7@DGL--54<84:5/686,)1;DĻG#-*#35;GIFFA?@<<=;978=>@JK?8JMA@@QNLGKN?DHPDDSLJZXXKP][j`a]V]UT]IM\RUYSDPQTUZWIK<<??LR8?GK0A@H>0+2.?:570/.7.&$+3;ſ<#%$#237:?GHGG@=7=8675-?EJL>8NP:<FSVOEGP=DOP?HPIEONP>STWe\\WQ_UN^HI\W[XGCHMQYXQKJAA??LM6<:B3A:H<+3.,876/6015,#'-&2e¿ò2&)(%096A@>>:<985752:40DKJJ>CNQG@FT\K@OOAGOT?JTQBQRQHSQTdYXQNbQPZCO]ZXYOCHITSSUMJ?;B=DG::=E:B<B8152078518//41//107D¼/%'$#-48<6::=;=996720,*CHKA;BLSNLBMZRAJNCLKP:D[QBTIPEOLO\PWCX^ONUFWWSUTNCKIPLPRKJA9ABIF8;CI8;==>9552<=75:646320/)03($+*.548@=AAA><:9944657JRKCHXZXRMLSXZHMUFPLVBRZWFPO[GVYT\TNLb^VV\U_WZZ]RBLMTQWWQMC?GGQN?@DN:@A=?@8;8BB;;:=EGV^ly¿),..0=86<?EB>>=;:8;675:MQN;UW[VYNFS^YKIOFRO\FJUZFUNVO\[SZRK[b\XU]P]V\YZUDMKZYT[VPGAF=NP<EIK:BA:;88Wqöǝ)-/(+288;@?<?CA;<9<:754MNP>UY]XWRKO`XLOO>POUDOOSBTOZEW]PNGPa[ZVW]QWOYY]RJUKXW[ZVSGA@DNL?EIMB<C;G:OŹɕ'-/)/;97;=:C<@<><;>;61-GFK>KNZSUJOEVMGHQ<KPUIIRSFRVYERQJHH\[VUN]TISNXWYVDMGUVWRTLFEB@KJ<AFH95><A8kɋ').)03599==@<;67:;74722>>>:@CLJGBE;SFC@M9HGD=@DH<HML<JQDCGPWIRCSIAOHPMRK@ACKKJAGA:=759:18@B84:9;<½˾ɾ~"+' ..3026;65:36672-/,/@E75=JIJEE?6LFC:B;>HD:@GE=FMR8@LCJHNLCKCGE@E=EFKRU\eyzg`R@4-05<Ľƾw!(&")+*/,1412631-0/,*(&7;12:A=7=>>2@?=8<27=<5<A<4=CB98C>GIOT[fnxþĿ0=ȿüm!"!#&%*'*)'*)'(&$14&45@4:5=95;;96800<B8GQV]lv~¿¾Ŀ%9úe !## &"$#  /4+226274DKKT_hp|¾';Ŀ¾Y!%$  ""&5*//00<~-IT!&""#($)'%!'""+-*-&+-48UK " ) #"% $+.+/47BLyvr>mB"+:H}eO?/(! *0}RxB)7@|n`VF9+&(%&!!!"$#*CP{7(4;¾rcSI>0.)'$#!#%" (!      #T`Ľ3 %$)+)#&'!%/7¿ĽÿNB70,.*%)&'* ! !!"E!SǨO¿/ "#"#" &+6þ!*(&""#! /.M÷¾)"!$(/¸#   ';¿"5D  !'2žǼ!!  9þ#$-+9B!#$$#""!2ÿ"! baaýýĶ$$$&" " %;j`c^Ŀǿ*!!# %6M\%(&-24ZWR0  $6DOYýAEGKKOYY[aahmpvu[`\Y(#'%$"! "")8BEASļ}wpd[KBZaeſ"'%%$!" 0:E?<G^ýþ¿lV>-# 3gkjd]VUROE820&SQTQ$(+&! ##   (:FFGILTeÿ¾ʹs]G5$!\YVģ)*&%!"!#-9@KOGEJFU[b½ýe^ar)+(&!!!! # !"$#)..,,,222AJMNKAA==CECV_	[[XkƾüC0.'##$"!$')%"*/33469:;;87;66;=C?7485:96/2K^_\]761442533:?84769:9:=;562//*,298/&,.243+&)6Zajhmh{ĿĶ}PSRTSMHLKGG@?89:411.+-+'('(-22*##(+.'!"#(2T(otprm¹¹faa`aZVULF@;987730310.-+(*131.+,(-./$ #')4Tþ½!$!!!$$"{z~}w͹ǢV[ZVOHHED;887872/1..*/('+.13,*&+5.(# "%!&,3X¾½V #$(+)(*69=;=<6/43,#%ÇMTYTLJHGF?=<A;7:64234..467360243.)(%)'$'*/<]¹m'205:GKPVUROF;:3250/!!#*1&%%26KZrZHOTIECA?::<=?<;:456414593537482+'+)1++++.6Gf|:??BIDGJLGJJJPCE??;<>J\rڱEJLIFE??<=9;>879:410.3872203450*)(),-*%%-1@Jdֿ˨4416@PSUOMSYau~Ͷ݁FIKKFDA;:8=9;95533469851643751./,+/,.*,',:DMj׼֟EIITmz֓ǼKFGEGA;786:67454969751277<210*++(")'*/>EVch^XvټʍLW϶|up˽ۿڙAIE<D<=;<79<9>:53174-537963+/9FNQXTTF>5)%%*4f۸yBJ՜uDKӽlFB;A:;88<B;8010/.2-/;HPVSVPKD7-"#$ & #&$'3c׹e>Nkwii˹T9:=:7369;24<JZ]]WWMC:*%#$ ! $##"!"#%-lѹXU_Ք^EB>KqѠ2=69=IU`c`UJ<*" !""#   # #,rպAPk׻\>bi{yt\__YOC2*%%(()! #!$#!# "! !  "!!0yоʿ6StӽhK?>:JضE++$$!&%,%#$'# %!!"##"! !&!!! !"$.к+i~םQ@CicvnY_ԤC**%&$%#&$'!%$ $$% ! "$-̪8TR˘qZ^MCABE\ɍD#%%# $%("&"!#!"$ 'ǡPT@Qy`<<?JVg{ĸɔF'%%$!$%&$& ""   !! $%-ȎPH?,yĎƸҢK)((#$&&&$%" !!  !""" !$!  ""'3ȋ[YP/;¸٤P/(&$!#&'!"'"#" $"#  "#  !!$%%/ԼɂbdR2%gž׬V*)'$%**%'&-$! #"$!+!" #$!$#$####$$#'0ub[P:63ǾӱV-+'%+&'%'**%$# "$""&+%!! "#%#!"&"##%>jǿpd_W<3*TǹٹY/.)1(&)/',')$$'%$$$(/*$&"'#$#$'1BQl~rnmeZE:5ÿվ[//()%,+(('*'%$&&&)$"##"&-AQoľxtmeYNE?DĹ¸~¢[--)'$*&('%&)#"%!!-1B[vȸpmrrz{uwofZUWu׿ŧ]*,(%%'&($&+2EaxȷfI-!3K\lwi]SиЫg.'*)4K]vmS9- !")7Bb|zpjѿt\70ɽΪȑpnP8+$#").5?NXluv}z}qeZaϹqaO;,   !ǻˤȹ\>.!"4FWmyoqqmlcwcL7)"(4DLQ__VΦǷ|`J2# # (4DWatytgb># '1:DYdjmqmrqurkɧĭ}bP9*)()2;H[es|xskdYamvzvzx{|vtsʥȵiO=($/3AQYh|{ǧóxX?'$&'5L]yɩȿxYH6'&.7M[tùvu_P;)))/BVkz|o]H7E0&!"&(,AO`l|jP=5%#&,)s{}IPZs{yhTC-! #.-0.,/4!ĵl\D5)!$()-/*/0(# #lZ@1&,(++$/-.0,&*"&,)( !"v_L9,""*06;;716,%-&&+!)%'('#!#!ŶmX;-'&$,1846;91,)$# &,*))$")23,#~pfyúv^F6'"'(19861+.,-)) $,042(!!""./3.)##),"!ĻeW@5,,5,35/4670%,#"#'"()0+(*$'2661*##+,154363-ſpZJ@./115?><;A6251(+'"#--**)&!(6<@<:3("**0167755+'    p)W Xq)` Fr)`r)`f s`0r\q;\rX2tS& uJ? u5mJ uI
C u7I
 uG uGM uHGvAsvA	v@v@6v?v?bv>v>v>%v=v=Qv<v<}v<v;v;@v:v:lv:v9v9/v8v8[v7v7v7v6v6Jv5v5vv5v4v49v3v3ev2v2v2'v1v1Tv0v0v0v/v/Cv.v.ov.v-v-1v,v,^v+v+v+ v*v*Mv)v)yv)v(v(;v'v'hv&v&v&*v%v%Wv$v$v$v#v#Ev"v"rv"v!v!4v v avvv#vvO        .(        TVm$Κ    Jasmine Scanner Manual2Contents1. Introduction2. External Interface2.1Jasmine Control2.2Commands2.3Data Transfer2.4Timing 3. Analog Electronics3.1Detector Array3.2Video Signal3.3A-D Conversion3.4Noise Filtering 4. Digital Electronics4.1Finite State Machine4.2Sequencing Logic4.3Stepper Motor Control5. Mechano-Optical Design5.1Paper Transport5.2Document Illumination5.3Optical Path5.4Lens Alignment/Focus/Magnification6. User Software6.1User level interfaces: Jasmine.RUN, Scan.RUN, Scope.RUN6.2Procedural interface6.3Microcode Interface and Implementation7. Check-out Procedures7.1Adjusting the Output Level7.2Optical Assembly7.2.1Alignment7.2.2Focus7.2.3MagnificationAppendix 1. SchematicsA1.1Analog BoardA1.2Finite State MachineA1.3Sequencing LogicA1.4Stepper Motor DriversA1.5PC board layoutA1.6Power WiringA1.7External CableA1.8 TC200 Paper Transport ModificationsAppendix 2. PROM MicrocodeA2.1PROM Blowing ProcedureA2.2Microcode ListingAppendix 3. RevisionsA3.1Rev Gb    ufuGfq'bq]KqZ u2XuXu2WuWu2UuUu2TuTqPu2O`uO`u2MuMu2LXuLXu2JuJqGu2F$uF$u2DuDu2CuCq?u2>mu>mu2<u<u2;eu;eu29u9"q6u251u517u23u3u22)u2)&q.u2-zu-zu2+u+u2*ru(*r	u2(u((u2'iu('iq$>u2"u("u2!6u(!6u2u(u2.u(.u2u(u2&u(&u2u(u2(qu2nu(nu2u(qu2;u(;                TVm$vΚ                tΰν                ΄   z   (JasmineBravo.PRESS                        (JasmineManual.PRESS                       (JManCover.PRESS                             d          F     F  BootMesa.Scratch.                                                                        Jasmine Scanner Manual31.  IntroductionThis document describes Jasmine, a low-cost experimental scanner.  Jasmine moves an originaldocument past a linear detector array to produce a gray-level image which can be displayedimmediately on a CRT, stored on a file, or transmitted to a printer for hardcopy.  It operates at amaximum resolution of 96 8-bit samples per inch, and moves paper at a maximum speed of 2inches per second.  It communicates through a simple computer interface which allows it to connectto an unmodified AltoII or D0.  The scanner speed and resolution closely matches the Alto/D0capabilities: neither machine can accept data at paper speeds above 2"/sec; doubling the resolutionwould produce about 4Mbits/page which is unrealistic for the Alto/D0 storage capacities.The scanner hardware consists of two printed circuit boards containing about 40 TTL chips, twopower supplies (+5V and -12V), a modified TC200 telecopier paper transport driven by a smallstepper motor, an f4.0 28mm lens, a front-surface mirror, and a light bar containing ten 48V ACbulbs.  The unit is packaged for desktop use in a sheet metal box measuring 15 3/4" x 19" x 4";the paper transport housing rises about 3" above the top of the box, and lifts on hinges for clearingdocuments.  The on/off button is mounted on the transport top.  Four screws attach the metalcover of the scanner box to the base.  On the rear plate are a female AC plug, a 3/4 amp fuse, anda female 25 pin connector.The electronics consists of a simple state machine which drives an A/D converter and feeds the 8-bit output values into a FIFO.  In addition, per-pixel correction is provided in order to produce auniform digital output range for each element in the detector array.   There are 6 bits of offsetcorrection and 6 bits of gain correction for each element, held in three 1024x4 static RAMs.  Theoutput variance among elements when no light is incident is called dark current leakage, andproduces a DC offset which must be corrected.  The gain correction takes care of the light responsevariation among elements.PeopleThe Jasmine scanner represents a joint effort between the Computer Science Lab and the OpticalSciences Lab at Xerox PARC.  The analog electronics were designed by Ed McCreight (CSL), theoriginal mechanical and optical design were done by Gary Starkweather (OSL) and the digitalelectronics and software were produced by Joe Maleson (CSL).  Fabrication and test of initial buildof 25 units was carried out by Terry Haney, Frank Vest, and John Henning (Garage).    ufuGf Xq%b u] u]O u\2 u-m\( uZc uY uaY@ uW+ u&W7 uU uU> uTy uzTyN uRX uOS uAO uNi\ uLX uBL uKa1 u*zKa. uI	 uqI\ uHY> u4HY uF u^FG uEQ uBI uBIF u@a uGI@ u?A4 u,?A- u=O u<= u<8Cw8D<8 w:<8uE/<8 u:. u(:5 u90w6( u3  u3 @ u18 u0t1$ u0 u0D u.5 u-.. u-R Xu+        	        TVm$[Κ                tΰν         X       ΄   z   (JasmineBravo.PRESS                        (JasmineManual.PRESS                       (JManCover.PRESS                             d          F     F  BootMesa.Scratch.                                                                                      Jasmine Scanner Manual42.External InterfaceJasmine connects to an external computer through an 8-bit input and 8-bit output bus.  Datatransfer from Jasmine requires an additional input and output control bit.2.1Jasmine ControlThe command byte from the controlling computer to the scanner is functionally divided into:Enable[0], Command[1-3], and Data[4-7].  To avoid hardware transition states, the command byte isfirst sent with Enable low (0), then high (1), and finally low (0).  For commands which do notrequire any data, the state of the four Data bits is not important.The Jasmine logic package is controlled by a state machine (sequencer), implemented with a ROM.There are four possible sequencer states: Wait, Scan, Load, and Init.  When Jasmine is powered up,this sequencer will be in some random state.  The sequencer is moved from any state to its Waitstate by a LOAD command followed by a START command.  From the Wait state, a STARTcommand moves the sequencer into Scan state, in which it produces the next scan line of samples.From the Wait state, a LOAD command moves the sequencer into Load state, in which it loads thecorrection RAMs with data received from the external computer.  The Init state is entered wheneither 1) the sequencer is Scanning, and a LOAD command is received, or 2) the sequencer isLoading, and a START command is recived.  The sequencer moves from Init to Wait on the fallingedge of the START command line.  2.2CommandsSTART (111)The start command begins a new Scan cycle.  In this cycle, the detector array first receivesa pulse which causes it to begin clocking out samples, and then a uniform train of clockpulses is generated.  The amount of time that light is integrated on a particular detectorelement is exactly the interval between output clocks for that element.  The timing intervalbetween start pulses is entirely regulated by the controlling computer.  Variations in theduration of this interval will cause variations in the output levels of the samples.In addition, the 4 bit Data field of the start command specifies the number of samples toskip after a sample has been digitized.  This feature enables a scanner with 1024 elementsto deliver either 1024, 512, 340, 256, 204, ..., or 64 [=1024/(skipCount+1)] digitizedsamples per scan line.     LOAD (110)The load command begins a new Load cycle, and sets the internal address counters toreceive the correction values for the first detector.  Each successive load command causesthe address counters to increment by one.  When the last element has been corrected, orwhen a start command is received, the sequencer enters its Wait state.MOTORCTL (101)This command controls the stepper motor which moves the paper.  Taking advantage of themotor's short duty cycle, increased torque is obtained by supplying high current for shortperiods (< 60 seconds).  Current is cut off from the motor by asserting data bit 2 (x1xx).Leaving the motor on for extended periods will cause overheating and possible damage.  Themotor is turned by applying power to two coils according to the two low order data bits.The motor moves forward one step for each value in the sequence {3,2,0,1}, and in reversefor {1,0,2,3}.WE1 (011)WE2 (010)WE3 (001)These three commands load the 4 bit Data field into the top, middle, or low 4 bit fields ofthe currently selected 12 bit word of the correction RAMs.  The top 6 bits of this wordcorrespond to the offset correction, and the low 6 bits are the gain correction.   ufuGfq#b Xq&b u_? u5_ u]JwZw2Z uW uWF uU( u$U9 uTyH u8gTy uRC uO uON uNi*w$Niu'Niw(Niu+oNiw,JNiu/LNiw2Niu5Ni uLS uAJLwEL uKa% u&Kaw;+Kau>Ka uI!w":Iu%I; uHY udHYwHYuHY0w4HYu7HY uF u4F5w8Fu:F uEQ u7EQwEQu}EQ<wC uC
 uC5w8Cu;_Cw=Cu?C uBI!w?Aw2?Au<8 u:w%:u(:0 uCc:	 u90? u890 u7 ud7E u6(S uC6(	w4 uQ4# u)40 u3 T u0$ u&`05 u.Z u-! u%-5 u+u*u(
 u' w&' u)' % u@'  u%|K u=%| u#W u"s;w9"su<"suk u! u&6 uc9 u4c! u# u&]7 w[! w%[4uE[ u udI uS) u+S0 uu	uC	u	 u;G u=; uW u
3P                TVm$~Κ       $         tΰν                ΄   z   (JasmineBravo.PRESS                        (JasmineManual.PRESS                       (JManCover.PRESS                             d          F     F  BootMesa.Scratch.                                                                                                          Jasmine Scanner Manual5 SETDELAY (000)The potentially large bandwidth required to transfer samples from the Jasmine FIFO to theexternal computer is a problem in some applications where the computer cannot keep upwith the transfer rate.  A delay counter is implemented which provides additional delaybetween digitized samples in units of 1 microsecond.  The 4 bit Data field thus specifies upto 15 microseconds of additional delay between output samples.  (see also section 2.4 fortiming details).  2.3Data TransferA 64x8 FIFO buffers data bytes between Jasmine and the external computer.  An output bit fromthe scanner (XBus.0) is high when the FIFO is ready with a data word.  Two control bits from thecomputer are used to shift a data word out of the FIFO: the falling edge of XBus.Read' sendsXBus.A0' on the FIFO shift-out line.  After the FIFO receives the shift signal, the output ready bitwill stay low until the next data byte is ready.  This will take more than a microsecond for someFIFOs.On the Alto, the XBus provides the input path from the scanner.  Each time the XBus is read, two addressbits are available on the connector, and a third bit indicates that the read is taking place.  For convenience andspeed, the "XBus read" signal is used to clock a flip-flop, with one of the address bits used as the input data.Thus, two XBus addresses are "safe," causing no change to the FIFO, and two XBus addresses cause the FIFOto shift out.  For computers with other I/O interfaces, both the clock and data can be driven fromcomplementary versions of the same output bit (clock low, data high causes a shift).Note that the XBus read signal goes high when any XBus address fetch is issued, so in order to shift theFIFO, a non-XBus address must be stored into the Alto MAR.   The FIFO is reset at every START pulse, so that any data not read out at that time will be lost.Because the inter-sample timing is critical, it is impossible to do anything if a new data byte is readyand the FIFO is full:  in this case, either the new data byte, or the first data byte in the FIFO,must be discarded.  It is up to the external computer to ensure that the combination of integrationtime, skip count, and delay setting will not cause data to be lost.  On the other hand, if the onlypurpose of the START pulse is to maintain constant integration time, there is no error signalgenerated if none of the data bytes are read out. 2.4Timing The maximum speed of the Reticon chip used as the detector array is 1MHz.  Each sample which isskipped thus produces  a minimum of 1 microsecond of delay.  The A to D converter implementedfor Jasmine provides a bit every clock time.  Currently, Jasmine runs on a 250 nsec clock;including overhead for other control functions, Jasmine will deliver a digitized value every 15 clocks(3.75 microseconds).  Thus, the time between digitized samples is (3.75+skipCount+delayCount)microseconds.  The minimum time per scan line for the various values of skipCount anddelayCount are given in Table 1.   ufuGfubu` u_+ u+T_. u]F u>V] u\ u \= uZ' u(lZ5 uYD u< Y uWwTyw2Ty uQq& u%Qq7 uO uOD uNi uuNiB uL/ u(L5 uKa uKaNuI tF t@FX tE0 t(&EB tD}( t%&D}H tC@/ t(C@: tBS t?B t@T t>J- t)>J; t=<u; u:'/ u*:'1 u82 u'86 u7 us7V u5 u5D u4 u4R u2P u@2 u11u/w.w2.u, u* u*K u){ u){G u'Z u&s\ uB&s
 u$ u$Iu#j-u,{#j( u!                 TVm$Κ       .         tΰν                ΄   z   (JasmineBravo.PRESS                        (JasmineManual.PRESS                       (JManCover.PRESS                             d          Jasmine Scanner Manual6delayCount  0 1 2 3 4 5 6 7 8  9 10 11 12 13 14 15skipCount(nSamples)0(1024)3.844.865.896.917.948.969.9811.0112.0313.0614.0815.1016.1317.1518.1819.201( 512)2.432.943.463.974.484.995.50 6.02 6.53 7.04 7.55 8.06 8.58 9.09 9.6010.112( 340)1.962.302.642.983.333.674.01 4.35 4.69 5.03 5.37 5.71 6.05 6.39 6.74 7.083( 256)1.731.982.242.502.753.013.26 3.52 3.78 4.03 4.29 4.54 4.80 5.06 5.31 5.574( 204)1.581.791.992.192.402.602.81 3.01 3.21 3.42 3.62 3.83 4.03 4.23 4.44 4.645( 170)1.491.661.832.002.172.342.51 2.68 2.85 3.02 3.19 3.36 3.53 3.70 3.87 4.046( 146)1.421.571.721.862.012.152.30 2.45 2.59 2.74 2.88 3.03 3.18 3.32 3.47 3.617( 128)1.381.501.631.761.892.022.14 2.27 2.40 2.53 2.66 2.78 2.91 3.04 3.17 3.308( 113)1.331.441.551.671.781.892.01 2.12 2.23 2.35 2.46 2.57 2.68 2.80 2.91 3.029( 102)1.301.401.511.611.711.811.91 2.02 2.12 2.22 2.32 2.42 2.53 2.63 2.73 2.8310(  93)1.281.371.471.561.651.741.84 1.93 2.02 2.12 2.21 2.30 2.40 2.49 2.58 2.6711(  85)1.251.341.421.511.591.681.76 1.85 1.93 2.02 2.10 2.19 2.27 2.36 2.44 2.5312(  78)1.231.311.391.461.541.621.70 1.78 1.85 1.93 2.01 2.09 2.17 2.24 2.32 2.4013(  73)1.221.301.371.441.521.591.66 1.73 1.81 1.88 1.95 2.03 2.10 2.17 2.25 2.3214(  68)1.211.281.341.411.481.551.62 1.68 1.75 1.82 1.89 1.96 2.02 2.09 2.16 2.2315(  64)1.201.261.331.391.461.521.58 1.65 1.71 1.78 1.84 1.90 1.97 2.03 2.10 2.16Table 1.  Scan line time in milliseconds for various sample resolutions and rates   ufuGftbA
 Ft8bAtcbAtbAtbAt!bAt%bAt(:bAt+ebAt.bAt1bAt4bAt8bAt;<bAt>gbAtAbAtDbAta	t_
t]Kt]Kt8]Ktc]Kt]Kt]Kt!]Kt%]Kt(:]Kt+e]Kt.]Kt1]Kt4]Kt8]Kt;<]Kt>g]KtA]KtD]Kt[t[t8[tc[t[t[t![t%[t(:[ Xu+e[t+[u.[t.[u1[t2[u4[t5>[u8[t8i[u;<[t;[u>g[t>[ FtA[tD[tZftZft8ZftcZftZftZft!Zft%Zft(:Zf Xu+eZft+Zfu.Zft.Zfu1Zft2Zfu4Zft5>Zfu8Zft8iZfu;<Zft;Zfu>gZft>Zf FtAZftDZftXtXt8XtcXtXtXt!Xt%Xt(:X Xu+eXt+Xu.Xt.Xu1Xt2Xu4Xt5>Xu8Xt8iXu;<Xt;Xu>gXt>X FtAXtDXtW^tW^t8W^tcW^tW^tW^t!W^t%W^t(:W^ Xu+eW^t+W^u.W^t.W^u1W^t2W^u4W^t5>W^u8W^t8iW^u;<W^t;W^u>gW^t>W^ FtAW^tDW^tUtUt8UtcUtUtUt!Ut%Ut(:U Xu+eUt+Uu.Ut.Uu1Ut2Uu4Ut5>Uu8Ut8iUu;<Ut;Uu>gUt>U FtAUtDUtTVtTVt8TVtcTVtTVtTVt!TVt%TVt(:TV Xu+eTVt+TVu.TVt.TVu1TVt2TVu4TVt5>TVu8TVt8iTVu;<TVt;TVu>gTVt>TV FtATVtDTVtRtRt8RtcRtRtRt!Rt%Rt(:R Xu+eRt+Ru.Rt.Ru1Rt2Ru4Rt5>Ru8Rt8iRu;<Rt;Ru>gRt>R FtARtDRtQNtQNt8QNtcQNtQNtQNt!QNt%QNt(:QN Xu+eQNt+QNu.QNt.QNu1QNt2QNu4QNt5>QNu8QNt8iQNu;<QNt;QNu>gQNt>QN FtAQNtDQNtOtOt8OtcOtOtOt!Ot%Ot(:O Xu+eOt+Ou.Ot.Ou1Ot2Ou4Ot5>Ou8Ot8iOu;<Ot;Ou>gOt>O FtAOtDOtNFtNFt8NFtcNFtNFtNFt!NFt%NFt(:NF Xu+eNFt+NFu.NFt.NFu1NFt2NFu4NFt5>NFu8NFt8iNFu;<NFt;NFu>gNFt>NF FtANFtDNFtLtLt8LtcLtLtLt!Lt%Lt(:L Xu+eLt+Lu.Lt.Lu1Lt2Lu4Lt5>Lu8Lt8iLu;<Lt;Lu>gLt>L FtALtDLtK>tK>t8K>tcK>tK>tK>t!K>t%K>t(:K> Xu+eK>t+K>u.K>t.K>u1K>t2K>u4K>t5>K>u8K>t8iK>u;<K>t;K>u>gK>t>K> FtAK>tDK>tItIt8ItcItItIt!It%It(:I Xu+eIt+Iu.It.Iu1It2Iu4It5>Iu8It8iIu;<It;Iu>gIt>IuAItAI FtDItH6tH6t8H6tcH6tH6tH6t!H6t%H6t(:H6 Xu+eH6t+H6u.H6t.H6u1H6t2H6u4H6t5>H6u8H6t8iH6u;<H6t;H6u>gH6t>H6uAH6tAH6 FtDH6tFtFt8FtcFtFtFt!Ft%Ft(:F Xu+eFt+Fu.Ft.Fu1Ft2Fu4Ft5>Fu8Ft8iFu;<Ft;Fu>gFt>FuAFtAF FtDF XuCQ                TVm$Κ       6         tΰν         X       ΄   z   (JasmineBravo.PRESS                        (JasmineManual.PRESS                       (JManCover.PRESS                             d          F     F  BootMesa.Scratch.                                    Jasmine Scanner Manual73.Analog ElectronicsThe analog electronics converts the detector array outputs to 8-bit digital values, individuallycorrected for gain and offset variations.  A separate analog board is used due to packagingconstraints.  For noise reduction, some of the analog components are in a shielded area formed by asolid ground plane and the metal lens shroud.  A single point ground connection is used betweenthe analog and digital electronics.3.1Detector ArrayThe Reticon RL1024G detector array uses photodiodes to discharge capacitors.  The chargeremoved from each capacitor is proportional to the light incident on the associated photodiode.Each detector cell is connected to the video line by a MOS switch.  The switches are sequentiallyclosed for one clock period, during which time the residual charge must be sensed, and then thecapacitor must be recharged.The differential video buffer outputs are common source amplifiers, and are connected to +5vthrough a 10K pot.  The pot is adjusted to provide balanced inputs to the LM733 video amplifier.The buffer outputs operate with an offset voltage near +5V, and the zener/capacitor/resistor circuitis designed to provide -2.3 volts to the video recharge lines so as to maintain a common modevoltage at the LM733 differential inputs midway between the amplifier reference voltages of 0V and+5V.  The end of scan signal is not used, and is tied high to avoid introducing noise.  The rechargegate is normally held high (off) by a 10k resistor to +5v, and is turned on (connected to -10v)when the LM339 comparator's negative input rises above TTL threshold (~1.5v). 3.2Video SignalThe LM733 differential video amplifier provides a linear voltage gain of  ~100 to boost the ~25mvdetector array output to the 2.5v range.  A CD4053 analog multiplexor is switched for 1msec toallow charge sharing between the .01mf capacitor and a 220pf capacitor connected to the holdamplifier.  When the switch is opened, the detector cell is recharged and a DC restore is performed,while the analog sample is digitized.  During the recharge operation, the video buffer outputs are attheir fully charged (black) state.DC restore is accomplished by connecting the analog multiplexor input to ground, thereby makingthe voltage drop across the .01mf capacitor equal to the difference between Vblack and ground.When the next sample is presented, the LM733 output voltage will increase to Vsample; themultiplexor input voltage must increase by the same amount, and since it was originally at ground,it is now at Vsample-Vblack, the sample voltage with the DC component removed.  When themultiplexor is switched for charge sharing between the capacitors, the hold capacitor will move tothis level.  Note that the previous voltage difference across the hold capacitor will have a very small effect on the finalvoltage, typically ~1%.  This slight blurring between adjacent sample levels is equivalent to shifting the input image by.0001".       The hold amplifier is implemented with a CA3140 Op Amp, providing a final voltage gain setting.The exact gain is the ratio of the feedback resistor (marked 5.1K, but typically 820 ohms) and theresistor to ground (1.1k).  To avoid clipping problems near black level in the A-D conversion, anoffset bias is added by a large resistor to +5v (marked 80K, but typically 1M); decreasing the valueof this resistor will increase the offset bias.  On the output of the hold amplifier is a 1k biasbalancing resistor.  3.3A-D ConversionThe A-D converter is implemented with a NE5008 multiplying DAC, a comparator, and asuccessive approximation register.  The SAR provides an 8-bit input value to the DAC, with themost significant unknown bit set to 1, and the other unkown bits set to 0.  The DAC produces anoutput between 0 and 2.55 volts (~.01 volts/bit).  This voltage is compared to the output of thehold amplifier; if it is higher, the most significant unknown bit is set to 0, and if lower 1.  The SAR   ufuGfq"b Xq&\b u^B= u3t^B# u\[ u[:" u[:A uY uYI uX2#wU*w2U* uR"Q uCR" uP8 u/P' uO uOO uM; u0M$ uL uI	\ uGO u>vG uF\ uDZF uD}X uDD} uB[ uCB uAu[ uCAu	 u? u?X u>mNw;ew2;e u8]Q u=8] u6! u V66xD6uD6 u5U$x#5Uu$`5U u$5U6 u3& u#+3> u2Lb uF2L u0" u- uv-E u,<x,<u j,< u/,<t=+u@;,< u*rNtB)uEU*r u(b u'#tb&u'#t%&u'#3t@'#uBP'# u%XB u4j%X  u#
t#! t!#P t"s- t!"sL t!
u!t! uQ_ u" u 4@ uItIuBI u!I= uO u; uAE u6A utuww2 u uL u)C u6q) u* u%5 u N u=  u
) u#
>                TVm$lΚ       A      	   tΰν                ΄   z   (JasmineBravo.PRESS                        (JasmineManual.PRESS                       (JManCover.PRESS                             d          F     F  BootMesa.Scratch.                                                                                                                                                              Jasmine Scanner Manual8then provides a new 8-bit input value, using the known high order bits, and a 1 in the mostsignificant unknown position.  After 8 clocks (2msecs), all 8 bits are known, and the SAR's EOC'goes low, indicating that the digital approximation is complete.The per-pixel gain correction is implemented by using an ADC-MC8BC DAC to vary the NE5008negative reference voltage.  The scale DAC reference output is connected through a unity gainbuffer amp to provide a high impedence positive reference for the NE5008.  15pf to -10?3.4Noise FilteringThe low level analog outputs of the detector array make it important to reduce electrical noise.This is the motivation for the shielded analog section, the various capacitors on the analog board,and the standard pi filters on the power supplies.   ufuGf ub0 u+b+ u` u`x)_`u*>`/ u_@ u\Y uZ; u2FZ" uYIt>YwUw2U uRN u>tR uQq; u/Qq( uO2        (        TVm$ Κ       L      	   tΰν                ΄   z   (JasmineBravo.PRESS                        (JasmineManual.PRESS                       (JManCover.PRESS                             d          F     F  BootMesa.Scratch.                                                                                                                                                                                                                          Jasmine Scanner Manual94.Digital ElectronicsThe digital electronics provide the control signals for image sampling, handling the correctionRAMs, A/D conversion, and stepper motor control.  The user's view of the digital functionality wascovered in section 2: External Interface.  This section discusses the internal operation in more detail.4.1Finite State MachineDigital control is based on a small finite state machine (FSM) with 32 states, built out of two ROMsand two latches.  The FSM operates on a 250 nsec clock.  The 512x8 State ROM produces the nextstate number based on the current state and the values of four input signals: the START andLOAD signals from the controlling processor, and the Sample and ScanDone signals from thesequencing logic.  The 32x8 Control ROM produces 7 output signals based on the current statenumber.  The ROM outputs are loaded into the latches at every clock cycle.  Five signals(VirScanClk, AnalogOn, DCRestore, and ScanStart) are concerned with the analog sampling logic.One signal (ResetAD) controls the successive approximation register used for A/D conversion.  Thelast signal (ResetCtrs) controls various registers in the sequencing logic.  A complete code listing forthe state machine is included as Appendix 2.2.  4.2Sequencing LogicThe sequencing logic consists of three counters: the Delay counter, the Sample counter, and theScan counters.  The Delay counter is provided for control flow, as described in section 2 on Timing.The Sample counter provides another level of bandwidth control:  reducing the number of inputsamples per scan line allows the controlling processor to accept more scan lines per unit time, andwill also reduce the storage necessary for holding an image.   The Sample counter is loaded on eachexternal START pulse with the four data bits, as described in section 2.2.The Scan counters are three four-bit counters which cycle through the RAM addresses.  They areinitialized with a constant value (-1025, based on the array size of 1024 elements) at every externalSTART pulse.  The Scan counters increment once per scan clock.  The high order carry-out bit isthe input signal ScanDone to the FSM, and causes the FSM to return to its Wait state.4.3Stepper Motor ControlThe stepper motor is made up of two coils, each with two windings.  The motor turns when currentis applied in proper sequence to each winding.  The two windings of each coil are always inopposite states, so that when current is flowing through one winding no current is flowing throughthe other.  Each winding is connected to -12V through a TIP 122 Darlington pair.  An LM339comparator is used to produce a 0V or -12V input at the TIP 122 base from the TTL output of  aNAND gate.  Each NAND gate has one input from the RunMotor signal, and one input fromeither StepControlA, StepControlB, StepControlA', or StepControlB'.  These three signals are heldin a latch which is set by the external MotorCtl command.  The RunMotor signal should normallybe FALSE, in order to avoid motor overheating.  See Appendix 1.4 for the electronics schematic.   ufuGfq"b Xq&gb u^B7 u.^B( u\ u=\I u[:/ u'[[:9wX2 w2X2 uU*0 u'!U*4 uSB u5S uR"> u4R" uP0 u+P) uOG u;qO uM( u)[M0 uL> u4L  uJH u8KJ uI	L u7yI	 uG0wD}w2D} uAuN u=Au u?? u2 ?% u>mW uD>m u< u<X u;e& u"0;e= u9J u6I u;`6 u5U6 u,"5U/ u3 uF3I u2LJwA2LuDf2Lw/Dw2/D u,<* u&,<6 u*3 u-*( u)4O u<)4 u'Q uA'	 u&, u3&,L u$B u;L$ u#$C u6#$ u!' u"!7 u < u3 # uH         
        TVm$Κ       O      	   tΰν                ΄   z   (JasmineBravo.PRESS                        (JasmineManual.Jasmine Scanner Manual105.Mechano-Optical Design5.1Paper TransportThe Jasmine scanner uses a modified Xerox TC-200 telecopier paper transport.  TC-200 partsremoved include:  DC motor assembly, illuminator bar, LED and light sensor, automatic paper feedwheel, and plastic cover.  The base casting is somewhat modified (see Appendix 2.8).  A new coverand a release bar extender are added.  After the paper moves through the transport, it exits thescanner housing through a rectangular rear aperture, and is turned up to an angle of about 60o by acurved metal platform.  The final paper turner allows the Jasmine unit to be placed close to a wall,and will generally handle documents as stiff as photographic paper.  For installations whereexcessively heavy input material commonly causes jamming problems at the paper turner, amodified platform with smaller curvature should be used.  One turn of the paper drive gear results in 2" of paper movement.  A 48 step/revolution steppermotor turns a 12 tooth pulley, connected by a drive belt to the transport's 48 tooth gear, resulting in96 steps/inch.  The stepper motor typically generates 6 oz-inches of torque, and so the 4:1 gearingprovides 24 oz-inches at the paper.  The torque decreases as paper speed increases above .4"/sec.Jamming problems may be caused by attempting to move thick documents at high speed.   (Thestandard software positions the document by moving the paper at 2"/sec; there should be a "thickdocument" setting which slows down the positioning rate).5.2Document IlluminationIllumination is provided by a strip of 48V incandescent bulbs.   This causes non-uniformillumination, which is brightest in the center, and falls off at either side.  In order to partiallycompensate for this non-uniformity, the center two bulbs are removed.  The remaining variation iscorrected by the Gain RAMs, in the same way that non-uniform detector element response ishandled.5.3Optical PathA scan line from the document is reflected off a 45o mirror and imaged through a SchneiderComponon f4.0 28mm lens onto the detector array.  The optical path measurements for figure 5.1are derived as follows:array length = 1.008"; (8.5" x 96pixels/inch)x1.008" = .803"magnification m = 8.5"/.803" = 10.585F = effective focal length = 29.4 mmO = F(1+m) = 339.44mm = 13.363"P = F(1+1/m) = 32.17mm = 1.267"D  = object to image = O+P+(N1-N2) = 368.41mm = 14.504"Allowing for + or - 1% focal length variations,364.75mm = 14.36" < Dtypical < 14.65" = 372.16mmand image plane variation is +/-0.32mmImage PlaneFront Conjugate= ORear Conj = PN1N2O = F(1+m)P=F(1+1/m)sh  .   E   BQ C P  ,e -l Dµ;  D\`BQ #m P  .  . . .  ,e c D  CK6 BTE A   ,  , A4   Ch BTE    -l ,e  ,    B  ?^ @_@ ;     , ,        ?^ @_ ;  @  , ,   ,     D  CVYBM x H  , ,} 5@&  CB BM ATH @  , ,  , C6EE  CΨ BF& v "x  - - ƀ  CVBF& BP "x  ,} ,  - D EN  Ci A_( 7    .  .. .  . 2    @  A_( B    - -  2  EE  ;  Aw | w A  4 4 =JE  9| Cܓ A  2 2  2. 2   4 C   Ȁ $ A`  41 40  D    A| A`  4 4  41 ?@        à  ?  4 4     B    <`  ?   40 41  4     &  0 A~ A  4 4 C|D  m 3  A  4 4  4 @  1Y Bm A݄  3 3 Ds9EE   n A݄  4 4  3 >߀  L  BH @  2 2 2 2  D  EN  )   > @  3 3  *Object ( Document Plane)Flange3.2 mmshFigure 5.1Optical Path Distances  ufuG?fq!b Xq$bw] w2] uZ uZ@ uYK u;NY uW uWO uU< u2U$ uT]uDTuEsT uGlT uR^ uECR uQ# u#xQ9 uOX uM: uJG u9J uIs uIsW uG5 u,?G. uFkX uCpFk	 uD u!D< uCc+ u'Cc5 uA9w>w2>u;Eu;I; u:K= u0:K' u88 u.8) u7BYu5w2 w22 u/D3u-/u.X/D uA/D
 u- u-B u,<t2*<t2)y)t)t2(`$t2'#t2%t2$7t2#j/t"-t!!t"B"-t &u>Yqyq$yq4yq0yq.yqy
q6y
zzA	&  0	   	  B	 !!2  0  0
  
2
  
 / ) ) ) ) / / ) ) ) ) /2	 !!2	 !!0!	! ! uq4]q8G8z2z/,! !2! !u	
u	        |        TVm$-Κ       W     	    tΰν               ΄      (JasmineBravo.PRESS                        (JasmineManual.PRESS                      	 (OPD.PRESS.PRESS                             d          F     F  BootMesa.Scratch.                                              Jasmine Scanner Manual115.4Lens Alignment/Focus/MagnificationThe scanner must be set up so that each scan line from the document falls across the detector arrayin focus and at the appropriate magnification.  Any skew present in the detector array due toinexact bonding is corrected by adjusting the position of the analog board in its mounting assembly.Minor adjustments to the angle of the lens are made with the top alignment screw so that the scanline hits the entire detector array.  Focus is set by changing the distance between the lens and thedetector.  This can be accomplished by inserting a test pattern into the scanner, and rotating thelens in the lens mount until optimal focus is reached.  Magnification is determined by the distancefrom the lens to the document.  The lens assembly and circuit boards are moved as a unit until thedesired magnification is reached.  For additional set-up instructions, see Chapter 7: Check-out Procedures.   ufuG?fwb Xw2b" u_' u$^_< u] u/]J u\ u\R uZ3 u,Z. uY2 u(Y2 uW0 u*W2 uU- u'
U6 uTyX uBTy
 uR#t"RH                TVm$ Κ       a     
    tΰν                ΄      (JasmineBravo.PRESS                        (JasmineManual.PRESS                      	 (OPD.PRESS.PRESS                             d          F     F  BootMesa.Scratch.                                                  Jasmine Scanner Manual126. User Software6.1User level interface: Scan.BCD, Scan.RUN[IVY]<Jasmine>Scan.BCD is a Mesa 6 system for driving the Jasmine scanner.  It runs on either D0s orAltoIIs.  It will display input pages on the screen, allows zooming, enables a user to set various of theJasmine device parameters, and writes output files.  The output files have an AIS header, and a PRESStrailer, and can be used as input to systems expecting either AIS or PRESS format files.  Scan4.BCDprovides the same interface, but with output to the D0 4-bit per point display.  A similar package existsin BCPL for AltoIIs as Scan.RUN.In specifying to a page position, the term Jasmine coordinate is used: this refers to the basic Jasminepixel resolution of 1/96".  In addition to the hardware state maintained in the scanner, there is somestate maintained in the software.  The current window refers to a rectangle on the page in Jasminecoordinates; when a new page is inserted, the current window is set to (xstart: 0,xlength: 1024,ystart:0,ylength: 1024).  Any of the four coordinates can be changed using the XS, XL, YS, or YL commands.All four coordinates will be updated by the Zoom command.  The current scan length refers to thenumber of output dots per scan line to be displayed on the screen.  Normally, the scan length is set to608 (full screen width), but the user may desire a narrower length in order to display a narrow, tallimage.  The current scan length is also used in creating an output file.The user interface to Scan consists of a key letter interpreter.  Each command is initiated by typing thefirst (and sometimes second) characters of the command.  Unrecognized letters are ignored.The key letters in the following list of commands are capitalized.?: The question mark causes the current settings of black, white, xstart, xlength, ystart, and ylength to beprinted out.Black: Prompts the user for a decimal number to be used by the halftoning routine; any pixels less thanor equal to this number will be printed as black.Calibrate: The scanner has a separate correction value for each pixel.  The calibrate command promptsthe user to "Insert sheet of white paper" and to "Press any key when ready."  Best results will beobtained from an opaque, flat white sheet such as photographic paper.  Any irregularities in thecalibration sheet will cause uneven calibration.  When the user presses a key to indicate that thecalibration sheet is in place, the scanner will average a number of white lines, and set the correctionvalues so that each pixel produces the same white response.  This is not an optimal calibration scheme: itsearches iteratively for the best solution.  After each iteration it prints out the minimum and maximum value for the line,and the cumulative difference of the 1024 elements from the desired value.  This routine does not incorporate darkcorrection, so that while a light image will be fairly uniform, a dark image will contain streaks.  John Warnock is currentlyworking on a better procedure.      ufuG?f Xq%Jbw_ w2_( uX uXK uVb uGdV uUMJ u9UM uS$ u"S? uQR u>Q uPW  uJ+w&Ju2J uBJ uHO u=:H uG?'w%G?u.GG? u>G? uE uEK uCO u=zC uBI9 u2BIw7aBIuC'BI u@ u@R u> ug>U u=SH u7^ uD7 u5Zu0Bq, uQ, u,f u1+"q' u'5 u1'- u1&,1q"
	 u"
 u'"
K u1 b7 u0 b+ u1J u? u1I u<* u1l* u&l= u1;t3n t:L" t1A7 t(jAD t1m tH t1 td t1u                TVm$Κ       d         tΰν                ΄      (JasmineBravo.PRESS                        (JasmineManual.PRESS                      	 (OPD.PRESS.PRESS                         Jasmine Scanner Manual13Delay: Prompts the user for a decimal number from 0 to 15 to be used as the delay (in microcoseconds)between pixels delivered from the Jasmine.  This control is mainly for hardware debugging.  Incorrectsettings will cause the scanner to stop working, and all settings in the correct range will cause identicaloutput.  The Scan program will automatically set the delay correctly.Erase: Erases the user screen.Forward: Prompts the user for a decimal number ("nSteps").  The paper will be moved forward thismany steps.  (1 step = 1 Jasmine coordinate = 1/96")Halftone: The scanner will read in pixels from the current window and halftone them onto the screenusing the current scan length.  Pressing any key will terminate the halfonte command.Initialize: The correction values in the scanner will all be initialized to a constant value.  This commandis useful for determining how well the calibration routines are working.Length of scan: Prompts the user for a decimal number to be used as the current scan length.New page: This command ejects the current page, and prompts the user to "Press any key when ready";the user should insert the new page, and press a key.  This command sets the current window to(xstart: 0,xlength: 1024,ystart: 0,ylength: 1024).  Quit: Ejects the current page, and returns to the Executive.Reverse: Prompts the user for a decimal number ("nSteps").  The paper will be moved in reverse thismany steps.  (1 step = 1 Jasmine coordinate = 1/96").Skip count: Prompts the user for a decimal number from 0 to 15 to be used by the scanner as a "skipcount": that many pixels will be skipped for each pixel delivered.  The software will use the sameskip count to drop out scan lines.  This command is useful for reducing the storage required for alow resolution image.  Note that the image produced by skipping pixels is undersampled, which may cause severealiasing and other problems.  A better way to create the lower resolution image would be by averaging the pixels insteadof throwing them away.  The hardware does not support this function.Time for integration: Prompts the user for a decimal number to be used as the integration time in 38.08microsecond "ticks".  This setting defaults to 656 ticks, or about 1/40 second.  For dark documents,it is possible to get more dynamic range by increasing the integration time.  Reducing the integrationtime may create impossible timing constraints.  If the integration time is less than the time required toread in a scan line, the scanner will stop working.White: Prompts the user for a decimal number to be used by the halftoning routine; any pixels greaterthan or equal to this number will be printed as white.XStart: Prompts the user for a decimal number from 0 to 1023 which will be used as the current windowhorizontal start in Jasmine coordinates.XLen: Prompts the user for a decimal number which will be used as the current window length inJasmine coordinates.  If XStart+XLen is greater than 1024, XLen will be set to 1024-XStart.YStart: Prompts the user for a decimal number which will be used as the current window vertical start inJasmine coordinates.   ufuG?fqb u%bB u9.b u1`v,w)|`v w2`v* w1^k w1](Du;k](qYuYqV uVY u1T4qQ uQ& u)Qw,EQu5dQ" u1O
w,Ou!rOq!Ou#O5qL
 uLS uAL u1JH qGuG' u1VGw?@GuKfG qDZuDZ uDZM u1B; u4(Bw@BuIB u1A2q,zAq=uj=8q:n uO:n3 u1M:n) u185 q5x
uF5xF u?5x u13 u|3J u12) uK2)U u10 uW0t03y870t>0 t1.8 t*.@ t1-zCu6-z q*+u*+ u&*+; u1( u(P u1&F u8&w=& w1%5/ w*/%5: w1#2u/#q ? uQ ?- u, ?3 u16qI uII u=I u1(qS uS	 u$SQ u1qu$ u5X!q] u]' u(~]; u1        R        TVm$Κ       l         tΰν                ΄      (JasmineBravo.PRESS                        (JasmineManual.PRESS                      	 (OPD.PRESS.PRESS                             d          F     F  BootMesa.Scratch.                                                                                                                                      Jasmine Scanner Manual14YLen: Prompts the user for a decimal number which will be used as the current window height inJasmine coordinates.Zoom: The zoom command waits for a new window to be indicated by the mouse.  Pressing the leftmouse button indicates the corner of the window.  Holding down the left mouse button will allowthe user to stretch the rectangle indicating the current window from the window origin to the mouse.Holding down the middle mouse button allows the user to reposition the window origin.  When theappropriate window has been selected, hitting the right mouse button will terminate the zoomcommand, and the new window will be scanned in and displayed.  Note that in the BCPL version, norectangle is displayed, and the new window is indicated by depressing the left mouse button at onewindow corner, holding the button down as you move the mouse to the second corner, and thenreleasing the button.6.2Procedural interfaceThe interface to the Jasmine scanner is implemented in both MESA and BCPL.  The MESA syntaxis used in this document, but the transformation to BCPL syntax is straightforward.  The interfacedescribed here handles the scanner data as an input stream.  For speed, a number of buffers arepre-filled with input data; typically the calling routine will not have to wait for additional inputfrom the scanner, because at least one of the buffers will already be full.  The following routines aresufficient for most scanner operations.JasmineInit: PROCEDURE;Loads the device microcode, sets up appropriate Debugger and Finish processes, and gets thescanner into the Wait state with a reasonable delay setting.  This routine must be called exactlyonce, before any of the other routines.JasmineScanInit: PROCEDURE[block: POINTER,nWords: CARDINAL] RETURNS [scanStream:POINTER];This routine initializes the nWords of memory beginning at address block for use as a ring ofinput buffers.  It moves the paper so that the first scan line of the current window is imaged onthe detector array.  The routine returns a pointer which must be passed to subsequentprocedures.JasmineReadLine: PROCEDURE [scanStream: POINTER] RETURNS [data: POINTER TOPACKED ARRAY OF [0..377B]];This routine returns a pointer to the next scan line of data.  The number of bytes in the scanline is determined by the current window setting, which defaults to the entire scan line, and thecurrent resolution (setting of the Sample counter).  Because of the input buffering, the data willonly be valid until the next call to JasmineReadLine.JasmineScanClose: PROCEDURE [scanStream: POINTER];This routine should be called before the next call to JasmineScanInit.  It ensures that everythingis left in a clean state.JasmineSetWindow: PROCEDURE [xStart,xLen: CARDINAL, yStart: CARDINAL _ 0,yLen:CARDINAL _ 1400];Sets the input window for the reading routines.  After changing the input window,JasmineScanInit must be called before any additional calls to JasmineReadLine.JasmineSetReadMode: PROCEDURE [readMode: [1..3]];There are three modes of running JasmineReadLine: when readMode = 1, the current scan lineis read without moving the paper; for readMode = 2, the line is read and the paper is moved(this is the default setting); for readMode = 3, the scan line is read, the paper is moved, and adelay of one integration time is inserted.    On the Alto, when the display is running, the currentmicrocode often "misses" clock ticks when reading a scan line (this is seen in the jittery motion of the cursor).  Byadding a delay cycle, two desirable effects are achieved: there will be no paper motion during the integration time,and the integration time of the line being digitized will not vary since that integration time was calculated when themicrocode was not reading, and therefore not missing clocks.The following low level routines allow the user to set various scanning parameters.   Somecombinations of parameters are impossible (i.e. integration time too short for digitizing the requiredsamples, or delay time too short to allow the controlling processor to acquire the data); not all of   ufuG?fqb ub- u-b- u1`vq]( u/](@ u;]( u1[ u[S u1YV uBY u1X2 u"VX2B u1VS uDV	 u1T# u'"Tt9FT! t1S< u'S< u(S<5 u1QV uHkQ u1OwLw2L uIO u?I uHY8 u/HY* uFG u8F uEQ% u!EQ? uC& u"CA uBI'q?Au?A u@=8 u2=# u@<8 u<8U u@:'q90 u90, u890u@7	 u@6(w6(u#u6( w86(u;6( u>6( u@4 u4E u@3 @ u:3 u@1q0%u400&u=0 u@. u@-! u"E-= u@+] uF1+ u@*C u6u* u@(5q' u' " u@%|2 u,%|0 u@#q"s uQ"s> u@ %u@k?&u;,k u@Nqcuc u@ u(w2~u8I u@[&w&#[u+[' uC[ u@#w!u'P u*1 u@S* u(ESt+]S5 t@a t> t@n tE t@w^ t<w t@;u03 u* u'0 uJ u8F u] uD                 TVm$Κ       u         tΰν                ΄      (JasmineBravo.PRESS                        (JasmineManual.PRESS                      	 (OPD.PRESS.PRESS                             d          F     F  BJasmine Scanner Manual15the impossible combinations are checked for, so that the programmer should invoke the follwoingroutines with caution.JasmineSetDelay: PROCEDURE [delay: [0..15]];Sets the delay in microseconds/sample.JasmineSetResolution: PROCEDURE [nSkips: [0..15]];Sets the number of samples to be skipped for each sample digitized.  The software will alsoskip nSkips scan lines between each digitized line.  Resolution defaults to 0 (1024 elements).JasmineSetTime: PROCEDURE [ticks: CARDINAL];This routine sets the integration time per scan line in 38.08 microsecond ticks.  Because there isAC variation in illuminator brightness at 120Hz, the integration time should be set to closemultiples of 218.84 ticks (=1/120 second).JasmineLoadRam: PROCEDURE [array: POINTER,len: CARDINAL];A low level interface used to set the Gain/Offset RAMs.  This routine is called by thecalibration routine, and is of limited use to the casual programmer.JasmineStep: PROCEDURE [nSteps: CARDINAL,forward: BOOLEAN];A low level routine which moves the stepper motor forward and back.  Moving the motor maycause the current page position to be lost.JasmineCoord: PROCEDURE [coord: CARDINAL] RETURNS[nSamples: CARDINAL];Converts scanning resolution coordinates (~250 microns) to pixel coordinates based on thecurrent resolution setting.  This routine will return the number of pixels on a scan line whencoord=1024.JasmineNewPage: PROCEDURE;Feeds the new sheet of paper up to the document window, and resets the internal line counter.JasmineEject: PROCEDURE;Ejects the current page.JasmineMotorOff: PROCEDURE;Sets the RunMode line to FALSE, thereby cutting off current to the stepper motor.6.3Microcode Interface and ImplementationThe microcode uses three fixed locations in low memory.  Location 526B contains the integrationtime in 38.08 microsecond ticks.  Location 736B is a pointer to  a linked list of control blocks.Location 737B contains the data bits for the START command.  The Alto microcode runs as part ofthe Memory Refresh Task, which is activated every 38.08 microseconds.  A counter is initialized tothe contents of 526B (ScanTime), and is decremented once per MRT activation.  Normally, whenthe counter reaches zero the command at 737B (StartCommand) is issued, and location 736B(ScanCBHead) is examined: if it is non-zero, the command it points to is performed.  If, however, acurrent command block is still being processed when the integration time counter reaches zero, thestatus of that command block is set to "StatusDATALATE," and ScanCBHead is set to zero.The data types for a command block are:ScanCommand: TYPE = CARDINAL;CommandREAD: ScanCommand = 0CommandDELAY: ScanCommand = 1CommandFORWARD: ScanCommand = 2CommandBACK: ScanCommand = 3ScanStatus: TYPE = CARDINAL;StatusINUSE: ScanStatus = 1//in general, all positive numbers are "in use" flagsStatusFREE: ScanStatus = 0StatusDONE: ScanStatus = -1StatusDATALATE: ScanStatus = -2ScanCB: TYPE = RECORD [link:POINTER TO ScanCB,command: ScanCommand,status: ScanStatus,buffer: POINTER ];CommandREAD interprets the status field as the number of bytes to be read.  If buffer=NIL (0)the input data is discarded.  The high level read commands implement a horizontal window by inserting two read   ufuG?f ub_ u`q]u]u@\&qZuZ u@YC u9yY u@WwSWuIWB u=WqU uU u@TyP u=Ty u@R uRM u@Qq*qOuJO+ u@NiH u?+Ni u@LDqKau5Ka0 u@IC u9KI u@HY+qFu%F: u@EQ: u4EQ u@C^w@BIunBIq@ u@ u@?A u"^?A>q= u=u@<8q:uU:u@90Qw4w24& u17 u/i1( u0? u30" u.\ uF. u- u`-P u+w+u+> u*.w,*u4* u7@*u(w0(
 u&( u(G u' H u8'  u%| u%|A u"s't2!tttZtt2 tt"
 t$1tdt'tt2 t2ntnt(n t?nt1ttt2x u* u'3 utm= t?                TVm$!Κ                tΰν                ΄      (JasmineBravo.PRESS                        (JasmineManual.PRESS                      	 (OPD.PRESS.PRESS                             d          F     F  BootMesa.Scratch.                Jasmine Scanner Manual16commands on the command block chain, with the first block containing a NIL buffer pointer.  When the currentread command is completed, the status field is set to StatusDONE, and the next command on thechain is immediately interpreted.  The other three commands cause command block execution tostop until the integration counter reaches zero.  In addition to waiting for the next line time,CommandFORWARD and CommandBACK issue the appropriate output signals to move the paperin the desired direction.    ufuG?f tbF t1bu=b u`A u5'` u_Y uF_ u]0 u)]0 u\K uBO\
 uZ                TVm$ ]Κ                tΰν                ΄      (JasmineBravo.PRESS                        (JasmineManual.PRESS                      	 (OPD.PRESS.PRESS                             d          F     F  BootMesa.Scratch.                                                            These images are printed using gray level fonts.  If you have access to a full PRESS printer, the real images are contained in[IVY]<Jasmine>Docs>CheckOut.PRESS. 


	
	"  	
		
		
	



						


			
				

				

	

	
			

	
	

		
	


	

		

	

	
	

	

								
				
		


		

		

			




			
		
		
					
	




	

								
		
		
	
				



			
	

	
	


		



		
	,/798ADEEJGSUZZXW`aeficmqsvz~|{vxqqzyw~m}vu{j/&q{x~|qvzvsmj^hc_^`[)#uxxrrqlpqirpqpc[cdifkcljokhcnnfk^`oejnfq|xogc^`ZVQRSQP"qgjhjag`d\][efii_X]b_ae_ecfmfcki`dU\cb`h\kxzhf^ZRSMNNEJHG#jWb`cddlaa_fjjzigdagexdlonsl}vtplodpvptuqs|yjwhe]\]Z^X_*&vyw{|}v00ĹùļWM*˿ٴR̅g@ʼ{ygmklb]`#*ZTXXVNXPRKJNPMRUCEFDMKGGMIRMKJJICIBFKGKPJQZeb\RNNPMNKKE@==G%s|VRIKLMIMKQTEFCBGCGCFHHGEBCA?E<>D?FHEGMVQMKFC?@>4310*N=>}.,.(*,.&..$$'#(&')&'(*'-)+&(# (((-)(2741-*+)+'' (?6Ba#&"#$"!)''  !!!"#!$!!!" $"" &0*(& c{wQQ !+#"#!P#'!06	'_}yhNJ7:168;9=D?5RO_oke[gedOTQ>BHTYWMReow}r2))),tĽϽԼϷzskmjjd`\<+7
			
	
				
	
	

					

	
	
		

			

	

			

		
			
	


	
			

	
				
			

	


	

				
!%
				


"
			

	
	



	


	

		

			

	

	


	

				

	

	



	

	



	
	
	


		
	

	




	
	

		

					

	

	




			
				
	





	

				
	
		
			

		




"!$ "% & !""$*&$&%*%''*',,),'$$$'# $! 1!#'').*2,'*,*3.+1-10.124273933126.,/(#"88?:?@CAB@@EABA@BACOECHJTZWVRIKJGGDAD@ADCDBEAIGDE@:@>757/#!ľϾQсpqposxuxryukqz~~P*(479;:9?:@B;?AEGDEECMLVOThupfbZ[[ZYUTXVWWVWXXSZSWVPKPNLHL:&|^(%%,(,')*)(..-2487<GLNKB=C>@A<9;@><@B=?=C>A8986755pk<+36/03q"% $$""!'&%'&'0/065;BB<;5744552304445224420-*+&<EA_L- 1 $" &(,511.'--'/+(-+*)'**(,)&*%#" Dn?  $+'('"!%"!! 8/wjE($'(($$%# $KQws\G=:*7-25854AXIqXkLU`Y/3,'"#!&"'7Kv-?[myroyg{w]mqx[$
0.);Z{jgG9
	





	





'22206195751767589<;<>8=BHTNG=5520,1,++()('*'%&"#"$!$$(3>=41+,,05427899<@BD>AB?>=;:?<7:.


	
	
			
		
	
		
	

		

	
		
		

	
	

				
										
	


		

	

	

			

	

	
	
			
	
		
		
	
					
		

	
	



		

			


		
			
	
	
	
		
	
	
			
					




	

		-		
	

"'	
			
		

	"	


	
			



		



					





	

	
	
	
			
		
	






		
"

"" ((" # "   #"!!!!"&!#() &%")$'&#)1(''+)).'(+.'(,+$)(#*!$!! !&"" #$'#"*''*&*))/+&*,)/*3.,5::2.5488138665563/88>1-3.1/(-%%##&&))--.-.,0*/-)36086190<93?@JF69;9=789:97755:=B:7(.+6E,.)*!Huqzxyxvzkonv{z}s||w}smlc\\Y]`YYTWYWTIC?FN_DB)#'*@?ILUUaó{y{|~t~jrmdJE%%&)**-&,E\vɽzŴs? " #!!!%'&+*,.(-+-,--..35*9964573+/&()(#9?:(" '%&&"*,*./+.*52,5624/1,-,+$%)&%%$!&# "&# *$$%"-*&.-+,,23*5225,--,,(&'$,$%!%$ !#!"&%)&*("++$(&'$$#$""!"# ##)&%&!%)!  #!&"* &&+($--)/)/.*36-0/,'&+$%#"!! !#  #"  !			
	





	

			

	









	

	

	
	
	

	







	
	
		



				

	





	

		

	






		
,
				
			
		
	

							
		
			
		


		




	

			
$	Jasmine Scanner Manual177. Check-out Procedures7.1Adjusting the Output LevelThe value of the 10K pot on the analog board is set to provide balanced input to the LM733 videoamplifier.  With your scope set at 2mV/division, sync on the ScanStart signal (pin #3B-10).  Placea white strip of paper on the document window and examine the output of the video amplifier (pin#IC2-7).  When the pot is below the minimum allowable value, the output is a constant high value(~4V).  Turning the pot clockwise will cause the output signal to move through the correct settingrange (Figure 7.1) to a point above the maximum allowable value, where the output will be aconstant low value (~2V).   The optimum setting is where high light level produces an output valuejust above the bottom constant line, and zero light level produces an output value just below thetop line.Figure 7.1: output at #IC2-7 with low, optimum, and high settings of potWith the pot set to its optimum position, examine pin #IC8-3.  The signal here should varybetween 0V (black) and about -2.2V (white).  If the signal goes below -2.5V, reduce the value of thefinal gain resistor #R10 until the maximum value falls into the permissable range.  If the signalgoes much above -2V, increase the value.  (Levels below -2.5V will cause the A/D system to wraparound so that high light levels read as "black", and levels above -2.5V will reduce the maximumrange of output values.  Setting the gain for a nominal value of -2.2V reduces output range onlyslightly, and guarantees no wrap-around).7.2Optical AssemblyFasten the analog board to the lens mount assembly.  There is play in the board position due tooversized mounting holes:  this allows corrections for minor variations in the position of thedetector array elements.  Fasten the lens mount assembly to the chassis at the midpoint of theadjustment slots.  Thread the lens into the mounting collar as far as it will go.  Set the lens apertureto f4 (full open).The three optical adjustment steps are performed with an alternating pattern of broad black andwhite stripes in the transport; this allows easy identification of the image window for alignment andprovides the appropriate patterns for magnification and focus adjustment.  There is a small amountof interdependence in the adjustment steps:  changing the focus may alter the alignment slightly.7.2.1 AlignmentThe lens axis must be positioned so that the image of the document window reflected by the mirrorfalls across the detector elements.  Small variations in the tilt of the lens to achieve this goal are    FtK~tJj"v6H>v6H2>v6G>v6G^>v6F>v6F>v6F >v6E>v6EM>v6D>v6Dy>v6D>v6C>v6C<>v6B>v6Bh>v6A>v6A>v6A*>v6@>v6@W>v6?>v6?>v6?>v6>>v6>F>v6=>v6=r>v6=>v6<>v6<4>v6;>v6;a>v6:>v6:>v6:#>v69>v69P>v68>v68|>v68>v67>vH<vH2<vG<vG^<vF<vF<vF <vE<vEM<vD<vDy<vD<vC<vC<<vB<vBh<vA<vA<vA*<v@<v@W<v?<v?<v?<v><v>F<v=<v=r<v=<v<<v<4<v;<v;a<v:<v:<v:#<v9<v9P<v8<v8|<v8<v7<vH<vH2<vG<vG^<vF<vF<vF <vE<vEM<vD<vDy<vD<vC<vC<<vB<vBh<vA<vA<vA*<v@<v@W<v?<v?<v?<v><v>F<v=<v=r<v=<v<<v<4<v;<v;a<v:<v:<v:#<v9<v9P<v8<v8|<v8<v7< ufuG?f Xq"bw] w2] uZ	 uZW uY uY2w1zY	u7LY uWK u;W uUG u9U uTy uKTy[ uRF u:R uQq uDQqC uO$ u"O= uNi	 Ft4H u2) uS2)R u0, u'#08 u/!S u@T/! u-7 u.-( u, u,R u*= u2*# u))w$w2$ u!} u!}A u u? ut8 u0@t& uQ u; ulwluMl udU uAd
 u uF u\S u>\ uM u< wL uD( u$)D9 u
D u3
"        (        TVm$Κ                tΰν                ΄      (JasmineBravo.PRESS                        (JasmineManual.PRESS                       (Jasmine17.PRESS                             d          F     F  BootMesa.Scratch.                                                                                                                                                                                                                                                      Jasmine Scanner Manual18controlled by the 2" lens mount adjusting screw.  A rough setting can be performed by visuallychecking that the image is correctly aligned.  Fine adjustment is performed by watching the scanneroutput on the Alto screen, and ajusting for the best image.7.2.2FocusThe image is focused by varying the distance from the lens to the detector array.  This is achievedby turning the lens in the mounting threads until the edges of the stripe pattern are as sharp aspossible.  When the mounting bracket is under tension from the adjusting screw, the resultingpressure on the lens threads will hold the lens securely.  For final focus, insert a text page into thescanner, and use the software to zoom in on a small (~100x100 pixel) area.  Rescan the area whileadjusting the focus for an optimal image.   While adjusting focus, it is easy to change the lens aperture, therebycutting down the brightness of the image.  Make sure the aperture is always fully open.7.2.3MagnificationThe image magnification is determined by the distance from the lens mount assembly to thedocument window.  Moving the assembly away from the document window increases themagnification.     ufuG?f ub upbE u`[ uC` u_;w\w\ uY, u'nY7 uWQ u>W uU: u2U# uTy uTyX uR uRD uQq uJQqt&5QqF tOWwLwL uI, u)I-uHY/u/HY" uF                TVm$ Κ                tΰν                ΄      (JasmineBravo.PRESS                        (JasmineManual.PRESS                       (Jasmine17.PRESS                             d          F     F  BootMesa.Scratch.                                                                                                                                                                                                                                                        Jasmine Scanner Manual Appendix19Appendix 1. SchematicsA1.1Analog Board2121211414131211654315XEROXFileProjectDesignerRevDatePageParc CSLMcCreight01GHRRT+-TRTRTRGND1VCC1ANALOGTTREFoREFiCTRSELCLK'RESET'RRRADC-MC8BClsbRRRRRRRRD0D1D2D3D4D5D6D7RRRmsbScale.0Scale.1Scale.2Scale.3Scale.4Scale.5GHRRT+-TRhdhdhdhdLM360CA3140GNDGNDTRhdnCA3140jasmana.silJasmineAnalog sectionGHRRiT+-TDD'D0D1D2D3D4D5D6D7RRRRRRRRV+V-REF+REF-COMPII'RRRRRTTTGND*msblsbTRGNDSAR.0SAR.1SAR.2SAR.3SAR.4SAR.5SAR.6SAR.7TREOC'Q0Q1Q2Q3Q4Q5Q6Q7lsbmsbCLKQ7'RES'E'DTTTTTTTTTTRRRRNextBitGND.DM2503GNDTRScaleCorr15pf1k1k1k.hdhdhdTR.GHRRiT+-TDD'LM733nCYXTSSYTRTTRRRRRRRRRTREOSRecGateDRecVRecVBufDBufBufSupGND*STARTCLKV-V2+V1+nGNDScanStartCD4053GND*RV+V-RRE'RG2BG2AG1BG1ARRRRRRV-V+CD4053LM733hdGND*RRRV-V+Clock-Pwr+PwrRRGND-10v-10v+5v+5v+5vGND+5v-10v-5v+5v+5vCA3140LM360NE5008RL1024GDCRestoreAnalogOn'.01uf8.2k-10v220pfTRTRTRnhdhdPi filterPi filterhdhdnTRTRTRVCC+5v-10vNegSupplyGND*RRRV-V+nTR-5vnPower SupplyGHRRT+-TRTRTRnVCChdhdhd1.5k3.9kLM339Scale DACScannerVideo AmplifierSample/Hold/Restore SwitchHold AmplifierSuccessive approx.DACComparator+5v+5v-10vCA3140-Pwr+PwrRRRechargeTRhd1.1kRefD3D2RRRRRRRRTTTTSD1D0E0E1E2E3H0H1H2H3COTCID3D2RRRRRRRRTTTTSD1D0E0E1E2E3H0H1H2H3COTCIOffset.5Offset.4Offset.3Offset.2Offset.1Successiveapprox.registernOffset adderLS283LS283.SAR.0SAR.1SAR.2SAR.3SAR.4SAR.5SAR.6SAR.7* adjust for proper gainData.0Data.1Data.2Data.3Data.4Data.5Data.6Data.7-10v#aa61-Pwr+PwrRRVCCLM339#bb34hdruA7905312652315141112101314796523151411121013147921742121214521231221212121748541051112436716861617118212791312101187121211091722121162415141313121110987657623212123614162431151385679121110212121236hdhd1221ScanClk'ResetAD'22uf+10k6.8uf6.8uf6.8uf6.8uf++++3.9uH3.9uH6.8ufiGHRTLS04SampleDoneTRTRnTR-5v22ufzener300 ohmshdhdhdTrue5.1k*n12nhd1kTR..**adjust for proper offset80k**7/19/79n.01ufTRTRTRn.1uf.1ufBOffset.0Truenn#C3#C2#1A#1B#IC4#IC6#IC3#IC1#IC2#IC2#IC1#IC8#IC8#IC5#IC9#IC7#IC7#IC6#IC3#2B21#C5#R10#R11#R12#R13#C6ADD#C12#R15#R16#R14#C9#R22#D6#C11#R17#R19#R18#C10#C7#H1#H2#C8#C13#C1512131411note: C2,C3 polarityis mismarked on PC board+5v+5v(#R21b)k#R20a#R21aSee modification listnrevGbrevGb   ufuG?f Xq#5bw_ w_{1P{A1P{4{A4{6P{A6P{	3  {653{64{62{61{60{6/{6.{6-l{6,P| y}(2  Gr}}3}?X}B}KK  GrB  Gr>  Gr's  Gr
  Gr O GSX  G Ot G  Gr}|4;	|M<~(H~(H~(H~(FY~+Gv{)J	{)K5J $d1PJr $1PJ $d1PKN $~5Gv~0Gv+K& $  5K&r $"I{ $dlI{r $lI{ $dlJN $~"FY~FY#J	 $,M $d(lMr $(lM $d(lO-N $~,J~(J  K&V $LBV $M_V $N{V $OV $P $P $QV ${+W{+X5{O~Lv~X{%\{+\{+S4{+TQ{+Um~VO~VP~VR{Y	H $H	+ $I $]|	 $}dI~VS~VX~VN!~VT~VFY~VGv~VH~VI{+I{+J{+K{+M{+N4{+OQ{+Pm{+Q~VM~VK~VJ}dQx{O{N{M{L{Km{JQ   ~Z~Z~Z~X~"sY{\_{^
^9 $"M $dlMr $lM $dlO-N $~"J~J-N{ $.KJ $U{5JQ{-M{#I4{#M  {H<J{*;JQ  X| ${WW_ $S| ${ST $S| $]U9 $",Y
 $dY
r $Y
 $dZJN $~",U~sU:Y ${"sX~%T&WY. $ "sY ${ \|(||:]~DI!~DI!~CGv~CH~FGv~GGv{DXJ{DXK~FH{EtK{EtJ7N{ $]7N{] $>;N $97_9 ${7^Q{7]5{7\{7Z{7Y{7X{7W{7V~6tZ~6tY~6tX~6tW~6tVv~6tUZ~6tT=~6tS!{7T{7S{7P{7O{:R{<]5{<\~6tQv~6tPZ~6tO=~6tM~6tLv~>;Y~>;X~>;O={7R}9;^Q}9;VGY
 $dCY
r $CY
 $dCZJN $~GU~CUHY9 $@tLB $0W^ $0W]| $0W\_ $0W[C $0WZ& $0WY
 $0WW $0WV $2U&  $2T
  $2R  ${2S4{0W^{0W]{0W\{0W[{0WZn{0WYQ{0WX5{0WWFR_ $dBR_r $BR_ $dBSN $~FO=~BO=>;Rr $GR $:Y ${36P{4,{4-{4/{403{41P{42l{43{44/;79 $6t* $V/;*^] $/;*^ $y}2,}24{//{4;+{/-{/03{/2l~6t2~6t1<~6t0 ~6t/~6t-~6t,~6t+~6t*~6t)u~6t(X~./~.,~.+~.*{HL(0z9 ${(0~6t(X{0W*{R,,\ $d'\r $'\ $d'^.N $~,,Y~'sY"s]| $,t]| $.Qf $9.QC ${/Pm	}C;Q@tLf $}DX5})\}2I  ~GGv{,t\{HX{GR(/^ $(.A9 $%] $d]r $] $dN $~%;~l;~X~d~d~;~X~;~s;{{~X{{{V  ~IS	r9 $VU ${{!{!3~"~ X{ ~"lr $" $ l $l $$~;l  $~1~2~-Y~/~0 ~2Y~4~5 ~6~7~9~5 ~: {8{0{2l{3{6P{53{5{:4{7l{8{;P{<m{=.A $.Ay $.e $>V $6 $V $	r, $U"] $( $ ~(l  :{ ${:8 $7 $x{7	 {#l{2~sr $"s $ $ $@{{~s~s{O~s{2{O{{~	~~
~~X~t{{ $	 $ $	rAr ${#{{l  {DEP~C@~CA~CC{DD4{DFmDXB $$DXB $HB $ DXGr $x{(/ {{2  $ $+	$ $ $~A~A  {>E=D{ $= $V< $V<9 $  {;{1tTQ{2Um{>F{>; $y  ${]  $A  ${{  {>D{X{k{:  {IXD4{9N{V/  sV $  $x{O3	   : $x{:	 }}V?  6	r ${6P}H  8 $d4r $4 $d4HN $~8~4;x3A $d/Ar $/A $d/N $~3~/;   =A $d9Ar $9A $d9N $~=~9;x- $-9 $   ? $>; $x*;
 $   9; $x6td $ ~5   {9;x{4;   }5W	}5W	x{4;   {9;x~5	6t+ $ *;]
 $   >; $? $x-9 $- $   = $d9r $9 $d9HN $~=
~9;
x3 $d/r $/ $d/HN $~3
~/;
   8 $d4r $4 $d4N $~8~4;x{*   {?{?Xx{*	     Gr{F2~Et~Et~Et{F{FOF $$F $Jt $ Fr $9;] $~BtC;y $C; $J-] $dE]r $E] $dEN $~J-;~Et;C] $C $$C9 ${HC9 $~LJt9 $L $|C;]~)u~)u~)u~'<~(X{:*{:,', $
 ' $&z $dl&zr $l&z $dl'N $~#X~#X' $$A $dO$Ar $O$A $dO%N $~!~!$A $d
k$Ar $
k$A $d
k%N $~!~
!$  $$r $$ $$e $ ~ x{%   {#{#{&3* $', $'V $:$ $9-% $}#l}#l{V+3|sT
	|9<|]|A|)E	|AU|C;T
|BH_
WJ	9 $  {'O{{
k{W{3{32  $ $+	$ $ $~]~]x{-l    $y9 $ $] $] $ $	ry9 $	r $"K $dlKr $lK $dlLN $~"H~HWI $U#LB $#N{ $%:Lf $9{#Km}J  ^
 $\ $\_9 ${\P& : $^ $$] $\_V $\ $x{C_4{C_6P~B/~B0~B1~B2~B4~B5 ~B6<~B7YC1 $C= $~H6~H4~H2Y~H0 ~E-Y{C_8{C_:{C_9{C_7l{C_53{C_2{G:{G7{G5{G3e{F<m~H9{E1H1 $C1 ${C_${C_&~B ~B!~B"<~B#X~B$u~B%~B&~B'C" $C- $~H'<~H%~H"~H ~E{C_({C_+3{C_*{C_'{C_%{C_#l{G*{G(H{G&{G#{F,~H)u{E"OH", $C", $   6t-%U $9# $	r9# $6t.A $:X& $V:X% $6t/^r $:(H $9:(%V $6t0z  $;t* $;t*^ $6t69 $xH-%  $IX-% $F/y $F/ $   6t4U $94 $$99	r $6t3 $:X3 $:X7 $6t2r $:2 $:5{V $6t1  $;t1 $;t3B $x<$ ${<%<' $<)A $<+z $<4^ $   <;	 $x{<'O{<){<+{<4   |+(%
|+&z|+$xF! $~Et   |Ax{IX"{IX2l~H9H:{ $H8B $H6	 $H3 $H* $H( $H&z $H$A $   {<:4{<7{<5{<3{<*{<(l{<&3{<#J	V $GLB9 $NXA $
,t2 $ ,t2 $})Gx{Jt:{Jt8{Jt6P{Jt4{Jt+3{Jt({Jt&{Jt$   ,tA! $WLB9 $  {IS4{/6P] $ $y9 $ ${"P{"P2!  $& $+!	$ $! $~!z~!z
$: $@ $s@9 $x{s   {'s@t8 ${F{Jt$r $  }K{!{ x{B#{B%{B&3{B'O{A(l{A){A*{A+{H+3{H({I&{I${E-!3{I-l{B3{B4{B5{B6{A7{A9{A:4{A;P{H:{H8{I6P{I4{E-0{I< {#IL{L  {{{H%{	%{,%{z%{H'O{'O{
-l{
+3{,P{J3{E
3{E
{E
{E
{9{3x{4{.{4{.   {9{3{
{
  {C_F{C_E{C_D{k{O{{{{{{{z{{>{O9{<{;{:{9{7{6P{4{2{1P{O6{O5{sO{3{
O{3{3  {,]{'	]{-.{.B/{.B0{.B2{76{GfS4{AS4{H_Y{BY{>S4{>\{>]{5{Pm{5{Q{6	S4{6	TQ{5{Um{5{W{5{X5{5{YQ{6	Zn{6	[{6	\{6	]{6	^{GL{GKm{C_L{C_Km{"Y{Y{#IN{N  {%^{%\{#]{3Pm{3\{S{T{U{W{]\{]R{X{JQ{Km{L{M{]P{]O{]N{-IN{'N{#IJQ{JQ{6-Km{0{Km{'L{'JQ{,tKm  {>;{>;{8{>{>{8x{9 N{ $x{(.   }X5|W}%x}0Wk   }:Xk}:X2x}0W2|.$   |>;x|4;   |9;}5W3}4}Fx~;P;~;<~;<~:;~?;{<?4   8?{ $86 $x?X?{ ${A?
   ,	9 $d5{ $d5{r $5{ $d6N $~d2Y~2Yd3B $d3Br $3B $d4N $~d0 ~0 6	@ $3e $3@ $~ /6	9 $  :,	 $$:1	 $d0z $d0zr $0z $d1N $~d-Y~-Y1	 ${1P1	] $}4}2l}/{53{2{031, $ 39 $2 $:3y $:2 $5{ $  8  $x{9 	r ]A $"s! $V!zA $})M  `C $JQW $9~D  >;\_9 $@tY $>;]|  $JQ[f $9{B]{H_]~IW{H\}D\H]|9 $G\ $dC\r $C\ $dC^.N $~GY~CY~s~ss $%: $-#z] $ $yr $  }E}M  |C; $~r + $ $@ $}
 $dr $ $dN $~
t~ty $ $  =fGB $d9GBr $9GB $d9HN $~=fD ~8D =fC $d9Cr $9C $d9E-N $~=f@~8@7D{ $7C $~6t? }:XC>;F $>;F $=G  $8G  $8E $98E9 $}:XFm|?@t8 $9x<6 ${<6   {<;P~7	8+ $ 8d $ ~78 $x4;9 $4;9 $   8 $x{0WO{0W{IX1P{IX! {s<m  { [{*;I4{#l{Vk{{#  {H<I{IXC{9Y{W{V*{"s{V{:x{<>{?X?{9?   {I{)N4{N4{K{2J  {:XD4|9GB}C;R{DX]5{DYQ{(]5{YQ{V0{3{5{${${&{F{:X{5WO{5W{:XO{{{#l{#l{3{  |-
|-	{N  {C
~@=B ${sD4{s@PsC $@:E	] $:D $sC $sA&$ $s? $:?{] $:?{ $@|VA~  |A|D{#  $#        p        TVm$}Κ                tΰν                     (JasmineABravo.PRESS                       (JasmineManual.PRESS             Jasmine Scanner Manual Appendix20A1.2Finite State Machine21211119413512546914101245671531311291410124567153131121516123547910111213141514129719181716542316811131519614715123459101214151113XEROXFileProjectDesignerRevDatePageMalesonCSLJASMINEFINITE STATE MACHINEState.1State.2State.3State.4Q7Q6Q5Q4Q3Q2Q1Q0TTTTTTTTRRRSRRA0A1A2A3A4CS'State.0State.0State.4State.3State.2State.1CL'CKSSRRRRRRD0D1D2D3D4D5TTTTTTQ0Q1Q2Q3Q4Q5State.0State.1State.2State.3State.4ClockSeq.SampleSeq.ScanDoneSQ7Q6Q5Q4TTTTRA8A7A6A5A4A3A2A1A0CS'RRQ3Q2Q1Q0RRRRRRTTTTnn82S147LS174HM7603....fsm.silESRRRSSTTTTTTTTE'E'S1S2S4Q0'Q1'Q2'Q3'Q4'Q5'Q6'Q7'LS138Alto.9'Alto.10'Alto.11'Decode.Start'Decode.Load'Decode.WE1'Decode.WE3'Decode.WE2'Decode.Start'Decode.Load'Alto.8'Alto.8'SE'SBSB3D3B2D2B1D1B0RRRRRRRRD0TTTTQ0Q1Q2Q3XBus.8XBus.9XBus.10XBus.11XBus.12XBus.13XBus.14XBus.15Output section: data to Alto either from  64x8 FIFO orhigh order bits of Init register (describes sensor array)Input decode: 3 bit command, 1 bitfor "command ready"Finite State Machine, controls scan cycle andRAM initialization cycleRechargeDCRestoreAnalogOn'SampleDoneLS257SB=0 selects DSB=1 selects BTrueVGGRMR'SOIRORSISQ3Q2Q1Q0TTTD0RRRRRRD1D2D3TTTVGGRMR'SOIRORSISQ3Q2Q1Q0TTTD0RRRRRRD1D2D3TTTData.0Data.1Data.2Data.3Data.4Data.5Data.6Data.7SampleDoneFIFOReadyiRRTBAFIFOReadynDecode.Load'02..XBus.Read'ppppppppXBus.Read'XBus.A0'XBus.0XBus.8XBus.9XBus.10XBus.11XBus.12XBus.13XBus.14XBus.15pppppppppppAlto.9'Alto.10'Alto.11'Alto.12'Alto.13'Alto.14'Alto.15'pnCable connectionsClockResetCtrs'ResetCtrs'LS00iCDRRTiLS00XBus.0pNegSupplypCL'CKSSRRRRRRD0D1D2D3D4D5TTTTTTQ0Q1Q2Q3Q4Q5TrueClockTrueF3341F3341NegSupplyNegSupplyLS174VirScanClk'Decode.SetDelay'ResetAD'S'R'RTTRSQQQ'DCXBus.A0'iGHRTFIFOReadyTrue.TRTRn200 ohmspVCChdhd.Decode.MotorCtl'4 Mhz XtalK1100ATRFout8TRVCCTrue1kTrueCL'CKSSRRRRRRD0D1D2D3D4D5TTTTTTQ0Q1Q2Q3Q4Q5LS1741210131191Stepper Motor Control..Decode.MotorCtl'Alto.13'Alto.14'Alto.15'....RunMotorStepControlAStepControlB7/19/79GNDGNDGNDTrueSerial No. 1returned onLoad  cmdB470 pfn#7A#7A#4A#6A#3A#2C#6B#1B#2B#4B#3B#5B#5A#3C11 3 413121052ScanStartResetCtrs'  6 31411 7215104614 357152891014131110 2 3 5 6129471012111389891142153164175186197208219221013,2511,231224#R1#C176S74LS74's won't workLS14Note: the inverter must beS'R'RTTRSQQQ'DCS74#1BClock(#3B9)32True(#1B14)Alto.8'(#6B5)5414True(#1B4)Synchronizer modification(blue wires).Alto.8'RAWAlto.8'RAW(C19)an LS14 for noise immunityThe flop must be an S74:   ufuG?fwbwb{d53{
53{d7{
7{,R{,C{H{{&3{"{ &3{ ^"  {A<{A:{F;{04L{4^OQ{4^T{4^W{-%X5{-%W{-%U{-%T{,Pm{-%OQ{4^X5{4^U{4Pm{04<{4^?{4^EP{4^G{-%H{-%G{-%Fm{-%EP{,@{-%?{4^H{4^Fm{4@{FJ@{D@{HB{F{I4{Km{+B{dB{EP{Fm{G{H{I{J{K{M{O{{:{:{{{{{+2{+O{+{+k{+{:{:{{k{	O{$e
k{",
k{ { :2{&{&z2{'O{&3{%{#{"{{V%{V#l{V!3{{V${V"O| y}(2  Gr}}3}?X}B}KK  GrB  Gr>  Gr's  Gr  Gr
  Gr O GSX  G Ot G  Gr|4}| ]	 $ 	 $ 	 $ 	 $ 	 $ y	 $|s{ { { { {{ {!3{"O{#l{${%{& $@ $O $(r $~O#X~O"<~O!~O ~O~O~O~O~s!~su~s<~X~s ~sX{$${$#{$"{$!{$ {{ 2 
  ${ %{ !3{ "O{ #l{ $  	 $ "	 $ #%	 $ $A	 $ %^	 $ ${H {z ~~)Ar $  $	r $	~:#X~:"<~:!~: ~:~:{&{%{${#l{"O{!3~ #X~ "<~ !~  ~ ~ {&{%{${#{"s{!V  y $] $A $$ $ $&Wy $&W] $&WA $&W$ $&W ${({({({(k{(O#	 $W	 ${W	s' $s% $s$ $s# $s" ${ k
{ O
$ $
$ $$$ $~3{{{{%~t~~~~{k{k+{kH{kd{k{k{k{k{k{
k~t~{%2{%O{%k{%
G $ 
$ $$~X~;~~~
~	~~~~
WV $~;~: ${{!{'~s~~~|) A
  $ $
  $s!z ${C~? ~C~E=~Gv~? ~? ~zAY~zBv~zC~zD~zE~zF~zH~zI!{C{C{OFI{OH{OJN{r $zC $C_ $C_ $@{L{Km{JQ{I4{H{F{E{D{sM K&	 $ H	 $ F	 $VLV $VKV $VJV $VH_V $VGBV $VF&V ${ Km{ I4{ F{M{K{H{Fm{G{ { AI $ A&
$ ${ Am:? $r{ ?4$W
$ $$V
$ $$U
$ $$T
$ $<E	] $<GB] $<I{] $IXD{	r $IXF	r $IXH	r $IXK&	r $:C $~G=v{GA{DA~EQ=v{CC{CD{CE{CF{CH{CI4{CJQ~C;@=~C;AY~C;Bv~C;C~C;D~C;E~C;F~C;HCA $]CA $I4A $9CM ${CKm~I4Gv~I4E=~I4C~I4@{GJ{GH{GFI{GD4;W $4;V $4;U ${:XX5{:XW{:XU{:XT{MKm{MI4{MF{MD$O

$ $:H_ $]:JV $4;GB9 $;tGB $@;tH_V $4;F&  $4;E	 $:D $4;O
 $|$_'6|$]|9|rQ"|rP&| +z-| ){!&3{!#	{!%	  {$?
{CM}IAm}I@P4;T $@- $U @	@ ${ @P{.BB~-?   {04>{.@P{3@P{2?4{.B?4~09{2mD{2mE{2mF{2mH~3;~3AY~3C{.BH-J $3= $-= $-= $~-D~-C~-Bv~-AY~-<~-;{.BF{.BE{.BD~3D~3Bv~3<{.Q~-N  {04M{.O{3O{2N{.BN~0I!{2mTQ{2mUm{2mV{2mW~3KZ~3P~3S!{.BW-Z& $3M $-M_ $-M_ $~-T=~-S!~-R~-P~-Lv~-KZ{.BV{.BUm{.BTQ~3T=~3R~3Lv{$X5{$W{$U{$T{$H{$G{$Fm{$EP$H_	r $$GB	r $$F&	r $$E		r ${$OQ
{9;OQ	~<9~87~8: ~=9~9;:~9;:2;9 ${2;	~G:3?{ $6t= $6t= $0K $$K $$; $0; $Et? ${;t?4<>	 $|M~3<"sP& $~3Lv{r7
$?{
  $~A2~A1~A0~A/~A.u~A-Y~A,<~A+ 86y $85{y $84^y $83By $82%y $81	y $8/y $8.y ${86
{85{84{83{82l{81P{803{8/{8-{8,{8+~A'~A(~A*8-y $8,V $8+zy $~Et+ ~Et,<~Et-Y~Et.u~Et/~Et0~Et1~Et2H<6
  $H<5{
  $H<4^
$ $H<3B
  $H<2%
$ $H<1	
  $H</
$ $H<.
  ${M5{M4{M3{M2l{M1P{M03{M/~H<%F', $9F)A $~F#X|>;8B{X<K9 ${$K
{$;
{9<~B6~B9~B9~BB9~BB6~Fm7~B9=< $A: $9A:{ ${C;F;	r ${L;4;H_ $G> $U~M<%7(
  ${7(	~A% :' $ :% $ :$ $ :# $ :" $ :!z $  !@ ${$e{"~%~"!r $&3d $	r!@ $	~!W~!W~!W~!Wt~!W
W~!W	;{",2{",{",{",{",{",~&3~&3~&3~&3t~&3
W~&3	;{$V{$9{${$ {${$ $r
  $&W $%: $Wy	 ${WH $s% ${sl, $s ${sOs ]r $  {/;S4{/;C$R_
  ${$R	{$B	$B ${(l{!'O  VE	V ${EP{!"{;-{5~A4~3u~6~A7Y~31<~38R{,:W{6{:{{7I<%U $5 $5{y $5{ $;	 ${;P~4~H5 ~H5 ~s4~4V7U $W1, $r1	 ${1P	W<% $= ${>~3u"s: $"s@ $:{ $ >] $7% $d7%r $7% $d8eN $~4~44^ $d4^r $4^ $d5N $~1<~1<r7 $V5 $4] $4] $~V.u2 $9}
6P~A#7'
  ${7'{4{67U $~VE{J}:Z
{YQVC  $ZJ $~TVf $Vf ${sX5{3XX| $T $d3Tr $3T $d3UN $~Qv~QvU& $U& ${VUm{Um}sS{5W5W@ $C;d $  ? ${BfO{@O~C	~@	?zr $D4+ $	r? $	~?X~?Xt~?XX~?X;~?X~?X{@-{@-{@-{@-{@-{@-k~D4~D4t~D4X~D4;~D4~D4{B{B{B{B{B{B{?5W] $A $DX
  $DX$
  $DXA
  ${D{{D{2{>;{>;2{@-2{Bf2|;t5WA
 $5W$
 $5W
$ $~>~>{5W{5W{5Wk{5WO~>;~DX;~DX~DX{H{Fk{FO|C;{<K{<I{<G{<EP|JtR|JtQC|JtO	|?}3~Q"R<', $9P)A9 ${C:{9;{EtK{/O{/@P{sW{C{:7{6P{&{    {{&{DO{ :{ :O{ :k{ :{&{&z{&zk{&zO{!!	{(2
  {'O{%{#{!{ ^'O{ ^%{ ^#{ ^!{>{>k{>;O{>;{D{{D{k{D{O{D{=<{8f;{8>{BK{BJ{BI{BH{BG{BFm{BEP{BD4{IKm{II4{IF{ID{<m{;P{7{4{7l{:{7{7{B6P{A53{B4{A2{B1{A0{B/{A.{B-l{A,P{B+{F6P{F53{F4{F2{F1{F0{F/{F.{A(l{A'O{H({M({7l{4{!{ {:9|1	{7l|6{7",{7~6	~9t~9~6	X~7;~7Q{8!V{8{6!z{6H6t#%U $9 $6tzy $6tz ${7 {7.y ${.{5W{5W"O8#% ${0&30%9 $9!z
 ${=!{:X!8$ $y{:Xl{7{7#l0$] ${0k
|<A|<~9t{M6
{+"O+"
 $|4|2        	        TVm$EΚ                tΰν                     (JasmineABravo.PRESS                       (JasmineManual.PRESS                      	 (FSM.PRESSRESSSS                             d          F     F  BootMesa.Scratch.                                                                                                                                                                                                                                        Jasmine Scanner Manual Appendix21A1.3Sequencing Logic2121658743211716151014131211658743211716151014131211658743211716151014131211111919346132571211312116537109415142113121165371094151421131211653710941514211312116537109415142FileProjectDesignerRevDatePageMalesonJASMINEXEROXFileProjectDesignerRevDatePageMalesonJASMINEB1STTTH3H2H1H0B3B2B0RRRRRSRTLD'TCL'EPETCOSCKB1STTTH3H2H1H0B3B2B0RRRRRSRTLD'TCL'EPETCOSCKB1STTTH3H2H1H0B3B2B0RRRRRSRTLD'TCL'EPETCOSCKCarry0Carry1Offset.0Offset.1Offset.2Offset.3Offset.4Offset.5Scale.0Scale.1Scale.2Scale.3Scale.4Scale.5Addr.2Addr.3Addr.4Addr.5Addr.6Addr.7Addr.8Addr.9Addr.10Addr.11Addr.11Addr.10Addr.9Addr.8Addr.7Addr.6Addr.5Addr.4Addr.3Addr.2Addr.2Addr.4Addr.5Addr.6Addr.7Addr.8Addr.9Addr.10Addr.11B1STTTH3H2H1H0B3B2B0RRRRRSRTLD'TCL'EPETCOSCKCL'CKSSRRRRRRD0D1D2D3D4D5TTTTTTQ0Q1Q2Q3Q4Q5LS174LS163LS163LS163LS163Scan Counters   Cycle Address Lines to Scale/Offset RAMS   Signal ScanDone   Latch contains frequency "n"3-State Drivers forScale/Offset RamsScale/Offset RAMS2 6-bit values arepassed to the analogsection for correction(separate correctionfor each sensor element).Intel 2114SEQUENCING LOGICSequence.SILAddr.2Addr.3Addr.4Addr.5Addr.6Addr.7Addr.8Addr.9Addr.10Addr.11Carry1Carry0Seq.ScanDoneSeq.SampleSeq.SampleCSL........RTiHGiRTiHGiRTiHGiRTiHGiRTiHGiRTiHGiOffset.0Offset.1Offset.2Offset.3Offset.4Offset.5RTiHGiRTiHGiRTiHGiRTiHGiRTiHGiRTiHGiScale.0Scale.1Scale.2Scale.3Scale.4Scale.5SEN'SEN'LS240LS240SEN'Addr.3i2114i2114i2114SamplePreset'1K x 4CDiRRTResetCtrsDecode.WE1'Decode.WE2'Decode.WE2'Decode.WE3'Decode.WE3'Decode.WE1'ResetCtrs'ResetCtrs'ResetCtrs'TrueTrueLS02TrueBAiiRRTTTTTSRRRRRRRRQ0Q1Q2Q3SRRCS'A0A1A2A3A4A5A6A7A9A8WE'TTTTSRRRRRRRRQ0Q1Q2Q3SRRCS'A0A1A2A3A4A5A6A7A9A8WE'TTTTSRRRRRRRRQ0Q1Q2Q3SRRCS'A0A1A2A3A4A5A6A7A9A8WE'nn03LS240#y15a#y15b#y15c#y15d#y4a#y4b#y4c#y4d#y4e#y4f#y4g#y4hLS02Alto.12'Alto.13'Alto.14'Alto.15'Alto.12'Alto.13'Alto.14'Alto.15'Alto.15'Alto.14'Alto.13'Alto.12'Alto.12'Alto.13'Alto.14'Alto.15'ResetCtrs'ResetCtrs..Addr.0Addr.1TrueTrueTrueAlto.15'Alto.14'Alto.13'Alto.12'TrueResetCtrs........   Digitize every nth sample, discard others   Latch contains frequency "n"Sample CounterLS163LS174CL'CKSSRRRRRRD0D1D2D3D4D5TTTTTTQ0Q1Q2Q3Q4Q5B1STTTH3H2H1H0B3B2B0RRRRRSRTLD'TCL'EPETCOSCK21415491073561112131127521364391Delay counterDelay n clocks after every sampleDelayDoneTrueiGHRTBAiiRRTVirScanClk'DelayDoneLS04LS02Decode.SetDelay'DelayDoneDelayDoneDelayDoneVirScanClk'VirScanClk'VirScanClk'DelayDone'DelayDone'DelayDone'TrueVirScanClkVirScanClkiGHRTVirScanClk'VirScanClkCDiRRTResetCtrsScanClk'ScanClkLS02nTRTRn150 ohmshdhdTrueGNDTrueTrueTrueTrue7/19/79B220 pf#5C#5D#5E#6C#6C#6D#4C#4D#4E#1C#1C#2B#3D#2D#3E#2E#2B#1C#1C14111510141115105646512334 9 810111213864211131517864212141618121416189753   ufuG?fwbwb{8C{3BC{8EP{3BEP{,,&3{,,'O{04{,,%{,,#{,,"{,,!{,, {+{+l{+O{-l{2%{2#l{2!3{2{,,7{,,9{04+{,,6{,,5{,,4{,,3{,,2l{+1P{+03{+/{-l+{27l{253{22{20{,,k{,,{042{,,O{,,2{,,{,,{,,{+{+{+{-l2{2{2{2k{22{K,P{K{L{+N{)eN{(W{(U{(T{'sR{-W{-U{-T{-R{:M{@	T{@	U{@	W{9;W{9;U{9;S{9;Q{8Pm{=M{9;T{@	X5{@	S{<IM{+'O{/{03{1P{1P{03{-{+{:*{'O{/{2l{-{'O{+{{ {!{!{ {l{3{:{{{"{l{{+2{{{2{2{{{{:{2{{O{{2}(2  Gr}}3}?X}B}KK  GrB  Gr>  Gr's  Gr  Gr
  Gr O GSX  G Ot G  Gr|4|| y}(2  Gr}}3}?X}B}KK  GrB  Gr>  Gr's  Gr  Gr
  Gr O GSX  G Ot G  Gr|4|{+~$ $~O~O~O;	 $@	 $O	+ ${O{k{{{+O{+k{+~V;~V~V
~V~V~3~V~OX{	O~O
{+	O{{
{~{	O O G Ot G  Gr O G Ot G  Gr O G Ot G  Gr{+ ~X# $~O~O~O $@ $O ${{{ {!3{+{+{+!3~V~V~Vt~V;~V~3X~V~O{~Ot{+{{d{"O~X{{+/~#3B $~O+ ~O,<~O-Y(% $@(% $O(H ${-l{.{/{0{+-l{+.{+0~V-Y~V,<~V*~V'~V&~3#~V+ ~O.u{(l~O*{+(l{+{){1~#{(l1	] $!z] $
 ] $
A $
% $] $
 $
 $s" ${{*& $9 $9 $9V$ $UVd $UV $U]] $@] $ $s-
  $s.
  $s!z $s ] $sA $s% $s9 $s9 $&WA $&W$ $&W $&W $&W $&W $&W $&Wy $&W] $&W@ ${57l{553{52{50{5%{5#l{5!3{5{5{5{5k{5227%V $24V $22V $20zV $2%^V $2#%V $2 V $2V $3 $3] $3$ $3 ${&W{&Wk{&WO{&W2{&W{&W{&W{&W{&W{&Ws2%
  ${&WO{&Wl{&W{&W {&W!{&W"{&W#{&W%{&W&3{&W'O&W@ $&W%@ $&WA@ $&W ]@ $&W!z@ $&W"@ $&W#@ $&W$@ $&W%@ $&W'@ $&W5{@ $&W4^@ $&W3B@ $&W2%@ $&W1	@ $&W/@ $&W.@ ${&W9{&W6{&W5{&W4{&W3{&W2l{&W1P{&W03{&W/.+ $%*	 $%$	 $.H $. $%]	 ${:Um~;PI:4Y
 $~?P~?R~?S!:4M $@:4M $?N ${>_S4{>_TQ{>_Um{>_V{:S4{:TQ{:V~9S!~9R~9O~9M~9Lv~>I~9P~?T={>N4~?O{:N4{:{P{:{O{=W~<I{<mN4(O ${+O{)O~,PKZ~*KZ(Y
r $-lO $	r(O $	~(S!~(R~(P~(O~(N~(M{)eV{)eUm{)eTQ{)eS4{)eR{)eP~-lS!~-lR~-lP~-lO~-lN~-lM{+V{+U{+Tt{+SX{+R<{+Q-V $-U $-T $-S| $"sV $"sU $"sT $"sS| $*;N $:LB $${)W{<R{,P{{2
 $] $%
 $$] $]
 $A] $
y $|8|7%+|5{|5\_|B@	|B>^|E	|B|A&|?{|=|<%|:{	|F
Ky $I{y $|s|(1tQC	 $1tP&	 ${/{-{!{ {{l{:2{:{:{:{"{:O{2l{K
{ :[
}s9 $s9 $~?S!~?R~?P~?O~(N~(M~-N~-M/ $- $~F8u~K8u~Jt8u~G9~G9~I7|IX:4 $ ~F5 ~K5 ~Jt5 ~G6<~G6<~I4'IX6 $ ~F1~K1~Jt1~G2~G2~I0IX3 $ ~G"<~L"<~K"<~H<#X~H<#X~J-!CJt# $ ~G%~L%~K%~H<&~H<&~J-$Jt'O $ ~F.u~K.u~Jt.u~G/~G/~I-|IX03 $ @t<% $@t8 $@t5{ $@t2% $A)A] $A%] $K<% $K8 $K5{ $K2% $L)A9 $L%9 ${NX<m{NX9{NX5{NX2l{NX){NX&3Ly $L $L$ $LA9 $Ay $A $A$ $Az $~Gt~Lt~Kt~H<~H<~J-{Jt2 $ ~G~L~K~H<;~H<;~J-&Jt $ ~G	~L	~K	~H<
~H<
~J-Jt $ ~G~L~K~H<~H<~J-Jt $ ~G~L~K~H<~H<~J-JtO $ ~G~L~K~H< ~H< ~J-Jt  $ {Ou"{Ou{N{Nk{N{NKr $P $yK% $K $U~M{M<Jt]r $N] $yJt
 $Jt $U~L{L{Jt	{Jt/Jt-%r $N-% $yJt0z $Jt-I $U~L({L-l{&W7&W8 $&W7 $&W6 $J $B,	
 $M $Ld $L,	 $@{.9{.'O{.{JAA9 $|&FA@@ $~H~H~F~HH~HE~sF{I	{B,P{C;{%k{A{%{%+3{%
{
{
,tL $#L	 ${#MM $M_$ ${MLB ${J{~>~>~s>~s;~>~;~3<[CV $A $V@ $? $9?{U $~2	;~2t~2~2~.~,~,~,	~,
~,~,~,;~,X-	 $-	 $2	+ $- ${1	O{1-{1	{1	~0~,~,t{0W	O{-I{-I{-I{-I{-I{-Ik{-IO{-I2{-I
{-I{-	O~2,~2/~21<~23u~.(X~,+ ~,,<~,-Y~,.u~,/~,0~,1~,2-, $-, $2, $-:{ ${1	6{1-4{1	2I{1	0~0(X~,5 ~,4{0W,{-I8{-I7l{-I6P{-I53{-I4{-I2{-I1{-I0{-I.{-I/{-,~2~2<~2u~2!~.~,X~,t~,~,~,~,~, ~,!- $- $2 $-( ${1	%{1-"{1	 {1	H~0~,#X~,"<{0W{-I&{-I%{-I${-I#l{-I"O{-I!3{-I {-I{-I{-I{-~0W0 $90) $~0W&0 $9|M{KO{H<3{H<{H<{H<2{G;{G8{G53{G1{H<({H<%{H<"O{H<{@Lz ${"sW{"sU{"sT{"sS{@t<m{@t9{@t5{@t2l{A{A"{A&3{A){A{Ak{A{A{A
{@	s9 $~s-Y~s,<}1P}03', $'	 ${'O{z	 $ $ $	 ${2  {W{X5{YQ{Zn{PmP&	 $PJ ${Q	~P~R~P~R~S!~T=~UZ~VvsS|$ $sT$ $|^
,|_|^{Um{ZQC] $VQf $V $W $Y
 $Z& $V $W $Y
 $Z& $R ${S4{S4~kN~3N\_r $S $	rR $	~Vv~UZ~T=~S!~R~P{Y{X{W{V{Um{TQ~Vv~UZ~T=~S!~R~P{Z{X{W{V{U{Tt{X~lMO\_ $~T=~UZ~VvOQC $@OQC $Qf ${zV{zW{zX{zY{V{W{Y~Vv~UZ~S!~P~O~M~T=~W{3Q~S!{Q{T-{S{Z~M{Q{ePm{%W{%[{VX5{Pm{S{VT{VW{VYQ{VZn{%Zn{%YQ{%X5{Pm{U{X5{YQ{Zn{
U{X5{YQ{Zn{R{R|5^
|8Z!?W9 ${DX5	;tLf $4LB ${4LBU $9BU $~HR~EtS!~EtS!~E-R~IXR~<D ~<D ~<C~<AY~;C~;AY~?Bv4;GB ${,tEP4K&V $=K& $sJ+W $>J $yN{ $sN{ $@{N	{EtUm{=E{N4M ${+	{3	{	. $+z $*^ $ ${&3{{IXU	r ${LU
{4;G
{1tQ
C;
 $A"9 $L"9 ${1tPm{L
{4Km
~8u~H9~H9~8u~,8u9<%y ${9<m{<m
,<% $~H<C~H<C~LAY~HBv~H@=~LAY?F& $AC] $AAI $:A& ${:Am	LE	 ${MEP{BFm{IXD~0W8E	y $8fD{ $d4D{r $4D{ $d4EN $~8fAY~3AY8fBB $d4BBr $4BB $d4CN $~8f? ~3? ,tE	 $:XB $98B $3B  $3@ $9~2<Y}3C{8D4{8A{1P{03{/{-{!{2
% $y
 $y|B|?}4;Am{.7{.&3{.k{Jt.{K3{Jt{+3{{{I{?{H;{:[{TQ{.X5{<P{EtTQ{=D{IXC{
W{
T{W{T{'sS{'sQ{-S{-Q{DU{IU{J{K{I{@{zA{z?{s<m{<m{:{G{:EP{?Fm{GFm{GD4{KE{Fm<m{Fm9{Fm5{Fm2l{F){F&3{F"{F{G{Gk{G{G{Km<m{Km9{Km5{Km2l{L{Lk{L{L{L){L&3{L"{L        
        TVm$Κ                tΰν                     (JasmineABravo.PRESS                       (JasmineManual.PRESS                       (Sequence.PRESSS                             d          F     F  BootMesa.Scratch.                                                                                                                                                                                  Jasmine Scanner Manual Appendix22A1.4Stepper Motor DriversXEROXFileProjectDesignerRevDatePageCSLJASMINEAStepper Motor DriversMalesonMcCreight7/2/79Stepper.SILGHRRT+-GHRRT+-GHRRT+-GHRRT+--Pwr+PwrRRTTLThreshTTLThreshStepControlATRhd6.8knn6.8khdTRTRhd6.8knn6.8khdTRTRhd1N40021N4002hdTRhdTR1N4747nCEBTRTCEBTRTCEBTRTCEBTRTNote: for diodes,KKKCoilA2CoilA1NegSupplyKKTRhd1N40021N4002hdTRCoilB1CoilB2TRnTRTapATapBNegSupplyNegSupplyNegSupplyhdhdK = cathode = banded endVCCNegSupplyiRRTBAiRRTBARunMotorRunMotoriRRTBAiRRTBATTLThreshTTLThreshStepControlBLS00LS00LS00LS00LM339LM339LM339LM339LM339TIP122TIP122TIP122TIP122Stepper motor sequencing:Forward A On B OnA On B OffA Off B OffA Off B OnBackA Off B OnA Off B OffA On B OffA On B OnTIP 122 pin order: B,C,E04#1D#1D#1D#1D#1E#1E#1E#1E81163910121354218910116745141312#1E3125ohm5w5ohm5w   ufuG?fwbwb| y}(2  Gr}}3}?X}B}KK  GrB  Gr>  Gr's  Gr  Gr
  Gr O GSX  G Ot G  Gr{||?||3]|4@	|C|)~M~M~M~KZ~Lv{:O
{:P~F~F~F~D~E{:H_{:J	~6<~6<~6<~4~5 {:7{:9^~/~/~/~-Y~.u{:1	{:2{${&3#  $# $+'$ $# $~"~!sH_] $sO
] ${sOQ	{sH	{IP&V $I{V $8V $&Q $d"PQr $"PQ $d"PSN $~&N~!N{&Q}#P&R_ $~)M)Qf $ R_ $ PJ $9 I $9 K $)J $~)F&K $}#JQ{&J&K& $d"PK&r $"PK& $d"PLfN $~&H~!H&:{ $d"P:{r $"P:{ $d"P;N $~&7Y~!7Y{&:4}#9&;	 $~)6<): $ ;	 $ 8 $9 2I $9 4^ $)3e $~)/&4^ $}#2{&3&3 $d"P3r $"P3 $d"P5N $~&0~!02%V $@-P $d;Pr $;P $d;QN $~@-M~;tM{@tPm}<O@tQC $@tJ $}<I4{@tI@-J	 $d;J	r $;J	 $d;KJN $~@-F~;tFC;J $C;MU $F6 $V{M<ALBB $dHBBr $HBB $dHCN $~L? ~H<? }HAmM<B9 $Ou? $U~N;={/;P{/;N{,tO~0WKZ~+WLv+M $+M $0WN $r+R_r $~0WM{/;JQ{/;H{,tI4~0WD~+WE+GB $+GB $0WGf $r+Kr $~0WF{/;9{/;7l{,t8~0W4~+W5 +6 $+6 $0W6 $r+;	r $~0W6<{/;2{/;0{,t1~0W-Y~+W.u+/ $+/ $0W0 $r+4^r $~0W/}7%}?XR}?XKm}HC{?GFB ${?T9GB	r ${27	9: $U}?X4}?X:C;3e $@-2 $d;2r $;2 $d;3N $~@-/~;t/{@t2l}<1@t3B $@t9 $}<8{@t9@-9^ $d;9^r $;9^ $d;:N $~@-6<~;t6<{?={?03C;6U $;t%	 $;- $d6r $6 $d6N $~;-t~6tt/% $/d $~/;/ $;-$ $d6$r $6$ $d6dN $~;-~6t;t	 ${Al{A0W9 $9=B	r $0W7 $0WJ $9GB $y0WQC $9QC $y9T	r $0WO
 ${2OQ	{2H	0WH_ $0W1	 ${21P	0W3B $90 $U9/	r ${;tO{;t}7#:%^	 $:&z	 ${:&{:%	~M~HLv~HN~sM~O=~O=sJ $~F~HE~HH~sF~H~HI{	 $J $yM $]P& $R_	 ${R
K $
K  $sQC9 $s99 $
4^  $
4 ${;P;		 $8 $6 $]3B $y2%	 $~/~H.u~H0~s/~1<~1<s3B $~6<~H5 ~H7Y~s6<~7~7{s1P	{s7	s7] $s1	] ${2l{P{JQ{9{2{WN4{WG{W6{W03{"O{.L{.E{.53{..}VO}V3}
	}

}
}

}V}

}
k}
O
}
2	}7!|M{O{I4{8{1{O{I4{8{1{sQ{sJ{s:4{s3{sR{sPm{sK{sI{s;P{s9{s4{s2l{Q{OQ{J{H{:4{7{3{1PM $6 ${Pm{I{9{2l{#{&{%}6t}6tO        :        TVm$Κ                tΰν                     (JasmineABravo.PRESS                       (JasmineManual.PRESS                       (Stepper.PRESSSS                             d          F     F  BootMesa.Scratch.                                                                                                                                                                                          Jasmine Scanner Manual Appendix23A1.5PC board layoutPageDateRevDesignerProjectFieXEROXAs viewed from the component sideParcCSLJasmineReference05LS283LS283LS02LS00LM339LS14CrystalLS163LS163F3341LS174LS174LS174LS174LS257HM7603LS163LS163LS163i2114i2114i211482S147LS174LS138F3341LS240LS240LS00ABCDEJASMINE DIGITAL BOARD1234567PC Board LayoutMerinoA9/21/79PCLayout.SILRL1024G7905ADCMC8BCLM339LM360NLM2503NE5008CD4053LM733CA3140CA3140C1R1C2C3R2R3R4R5R6D1D2D3D4D5RRR789CRRRRRRRC11R121314R15R16R17R18R1920212210C45C6C7C8C9C1011D6H1H2IC1IC2IC3IC4IC5IC6IC7IC8IC9IC10TIP122TIP122TIP122TIP122C14C15C13C12 S74note: C2,C3polarity aremismarkedon PC board   ufuG?fwbwbd GrM GQ GN G	rd Grd Gr)d GrAd GrDXd GrM<d Gr}MN}DN}AN}5WN}
N})N|rd Gr4d Gr}	r!} } |
]}N	|NX]{-l,	 $,	 $e,, $/d $V/d $,, $V,	 $V,	 ${-l' $' $', $* $% $" $" $", ${#l{l  $ $ $, $+ $+ ${k $ ${,(lV', $V' $' $V* ${#lV% $" $V" $V", $ $Vd ${lV  $V, $V+ $V ${kVd $ ${ -l/ $&,	 $,	d $,, ${!(l&' $'d $* $', $", $% $"d $&" ${!#l{!l& $d $  $, $+ $ $d $& ${!k{)-l(/ $.e,	 $(,	d $(,, ${)e(l.e' $('d $(* $(', $.e" $("d ${)e#l(% $(", $(, $(  ${)el(d $.e $.e $(d ${)ek( $(+ ${10W] $7 $0W9 $0W+ $0W, $0W9 $7 $0W ] ${1{1#0W%] $7" $0W"9 $0W", ${2(0W*2 $8f' $0W' $0W', ${1-l6,	 $0W,	d $0W/ $0W,, ${;-(l:X* $@' $:X'd $:X', $:X,, $:X,	d $@,	 $:X/ ${;t-l{<#:X%2 $Bf" $:X" $:X", $:X, $:X $:X 2 ${<{C-lB/ $B,	 $B,, $H<,, $3F GN G :F G G |-%|(%|#%|%|$V $V $lV2 $ $HH* $F*] $F $HF] $I $I  $H-G $H $< $< $9{9;]|0z|0z|#0z|*0z|30z|<0z|D0zV $VA $ $ $A $ $ $A $#I $' $|:|5|A]|Et]|*;]:9 G:90 GBQ GBQ GB? GB9 G:W9 G"sQ G"sQ+ G&Q G&W GD $D  $,D $JQ$ ${!GB;tM $=M $;tUm $;tN $4N $4Um $7IM $4M $4< $7I< $4D{ $4= $9= $9D{ $9< $9;J $9;G $9;F $<F $=>r $A: $=9 $=9 ${=;{:B{:Am{:@P{5BB{5A&{9;I4{9;H{;tR_{;tQC{4R_{4QCsL $sK $eK $sN ${Ls@ $@ $sE	2 ${B7G $4F $4F $4J ${5H{5GK $Kr $#IK $2N ${LBPJ BN BK BI BGf BE- BB BO- BL BJ BH BFI BD BA B@ s@ $rI0z $L/ $I/^ $I/^ $@I2% $L1, $I1	 $I1	 $@{Jt1P{Jt/D] $FJ $D9 $FJ, $D] ${D{DO#K $#K $$K $'sK $%K $'sK $'sN{@ $(K $K $K $K $N{@ $A& $WAI $A& $A& $C@ $s>^@ $; $s; $s; $< $< $:< $?{@ $>^@ $; $; $; $4; $@4; $7; $4< $4;	 $7: $49 $49 $@9;; $@9;; $<; $9;< $9;;	 $<: $9;9 $9;9 $@>> $A? $<Am $<@P $<D{ $?XC $<C_ $<C_ $@<GB $@<GB $?XGf $<H_ $<J $?XI $<I{ $<I{ $@8QC $@8QC $:Qf $8R_ $4F $7E $4E $4E $@3Lf $3LB $4;LB $3O
@ $>A $>? $<I= $>@	 $<@t $?@t $>A $>B $AA $D%9 $B, $B $C $B@ $D, $Bf, $D $ $@ $V $ $ $V $ $ $@ $e $ $ $e $ $ $@ $@ $" $  $ $" $d $ $@( $( $+ $( $( $+ $( $( $ + $'A $0WA $@0WA $3d $0W] ${Bl{BO{{s{ {)e{{s{ {)e{1-{#%@ $"O $"O $"s $ $ $ $ ]@ ${{]@ $ $ $ $' $' $' $*^@ ${"{{{({#M_{&M_{'M_#N{ ${3fM{B{HB{=B{,M_{%K%N{ $&K $%K@ $)K $)N{ ${)eM_*;K $)K ${'sK{)KWC $sAI $WA&@ ${3L{8Q{=G{5WE{5W;{5W:4{WAm{Am{s;{#K{e>^{'{,LB{=I{=C{=f@{9;{9:4{<{=B{<%{?XA{?X?4{O
{EP{O
{&E	{5U{5WK&{5D{9K&{9D{;U{k{Vk{k{(k $F $E $E $E $@> $@> $? $@	 ${E{?4K $J $J $J $@{J4LB $@4LB $7Lf $4M_ ${5WL|(%{G{G{G	{G                TVm$Κ               tΰν                     (JasmineABravo.PRESS                       (JasmineManual.PRESS                       (PCLayout.PRESSS                             d          F     F  BootMesa.Scratch.                                                                                                                                                                                                                                                                Jasmine Scanner Manual Appendix24A1.6Power WiringPageDateRevDesignerProjectFileXEROX1CSLGAVEST<IBIS>tyuiTYUItyuiTYUItyuiTYUItyuiTYUItyuiTYUItyuiTYUItyuiTYUItyuiTYUItyuiTYUItyuiTYUItyuiTYUItyuiTYUIa34bSWITCHPLUGWHITEBLACKBLACKBLACKWHITEWHITE-12 VOLT POWER SUPPLY+5 VOLT POWER SUPPLYSCANNER BASIC WIRINGSCANNER.SILFUSE 3/4 AMPLNELENSMIRRORB1B2A1A2YELLOWYELLOWGREYGREYGROUNDSTEPPERMOTORINTERNAL CABLEANALOG BOARDDIGITAL BOARDJ-1BLACK+12 VOLTS  (YELLOW)GROUND   (BLACK)GROUND  +12 VOLTS  (YELLOW)GROUND   (BLACK)PIN #25PIN # 24PIN #23+5 VOLTS   (ORANGE)+5 VOLTS   (ORANGE)GROUND  GROUND  COMMON4/8/80   ufuG?fwbwb GrOt GSX G
 Gr Gr's Gr> GrB GrK Gr{K{B{?X{3{2 Gr{(| Ot G|L| ||?X{32{+WH<d $Q
@>^ $
@ $Q8^9 $:] $8]|] $8]| $@8]|U $;tVf $98VCy $8VC $]8T $8T9 $:T $9;U $:XUJ $ 9;U&@ $9;U& $ 7[r =]| $CZJ $U=Z& $y>Y kU@tY kUBY kU>Y. $ <Y
 $<Y
 $9KJ $
@tW $@tW_ $FW_ $:LU $>;FI $:F&y $:F& $;tF&9 $=E $ ;tE] $;tE $ 9K& $>;K& $? $+9)AV $G $
9y $9 $
9V $G $9y $9 $@?X ] $@t $ ?X@ $?X $ A $ A@ $B $ A ] $Et$ $@Et$  $FH $EtA  $BH $B$U $? $? $Et $ Et  $F $ 8y $5$ $4?{r $9;=f $94=B $4=B $]5?{ $8?{ $E $UE $U"sE $U)E $U/E $UsH!V $sE $y%BB $]BB
  $Bf $93C_ $@/C_U $/C $,tC_ $@)C_U $)C $"sC_ $@C_U $C $sC_ $@C_U $C $C_ $@sC_U $sC $E $sE $E $GB$ $%E $%GB $,tE $,tGB $3E $2D{ G2Et G2<Y2=v/^D{ G/^Et G.<Y.=v,	D{ G,	Et G+W<Y+W=v(D{ G(Et G(<Y(=v^D{ G^Et G<Y=vD{ GEt G<Y=v"	D{ G"	Et G!W<Y!W=v%^D{ G%^Et G$<Y$=vD{ GEt GV<YV=vD{ GEt G<Y=v]D{ G]Et G<Y=vD{ GEt GV<YV=v5A& $/H@ $8BB $$3GB$ $;tL $@=L $@{=M;tM $]{9I{>I{<M{;tD4{5W>=M $ =N{ $?KJ $U=Z& $;tP&U $>;P& $BP& $	BY  $B$ $5B$A  $B  $Be ${=Pm{<W{6tR{<I5{C;5{B{IXl	{IXO{IXO{IX2{s{(2{7_{?XZn{BZn{AZn6 $s* $9*^ $*^ $] $%:]  $6  $s: $. $ sy] $ :z $&Wd $9 :A@ $ :A $]{  + $9%+ $95 $)e8s $$:M+W $7J $U:J+z $:J $y|WKs" $! $s  $s $ $sA $s $d $sA $ $ $s ${3{{{!3{!z{{%{z: $s $s $A  $ $ k  $k $ k $ k  $ $ A  $  $ $   $ $  $ k  $ $ G  $  $ $   $ $  $   $ $   $s $z  $ $   $ $  $   $ $ z  $3  $3  $3  $  $V: $  $ $
] $
]  $d $
   $ $ $
+ $U
 $O $ k  $+ $  $y
#%] $
 : $#% $@{
% $d@ $ $O] $ $:  $es $ $*^ $]*^ $* $96 $s $%:VO $O $  $e $ ", $V" $s6P G $s6P  $s*  $) $ ) $  $:: $H:9 $+ $V $ ${2{1] $\< $\ $\ $
\ $\$ $;t\ $C\r $7%  $7% $ kV6 $H6 $@7  $7  $7 $ 6 $ 6  ${d<s $+ $ s $ $  $ {{H1P) $ {\7% $ 7l $ kUJ@
T
@
<@H
:@: @: G@7I@7% $: G1t', G1t',	r G9;: G.", GV.", G3d G3	r G=f G7H G-V G - G0r G0+ G@t+ G :& kd:!V kdEt dEt  Et+ ?X  k?X A < ?d {B{;	{9{4{2m({/#{&;	{&9{&8{8{2e $0 $y0 :
 $:4 :  $:e kd{r{/; 4! G $ $A{
&A#d {B2        V        TVm$	ZΚ               tΰν                     (JasmineABravo.PRESS                       (JasmineManual.PRESS                       (Scanner.PRESSSS                             d          F     F  BootMesa.ScJasmine Scanner Manual Appendix25A1.7External CablePageDateRevDesignerProjectFileXEROX1CSLGAVEST<IBIS>4/8/80SCANNERSCANNERCABLE.SILCABLE FOR ALTO 2123456141516171878910192021222412ALL GROUNDS TIETO A COMMON POINT21201918149876161525119751121086NOTES:1. CABLE IS 10 FT. LONG2. CABLE IS 19 TWISTED PAIRS3. ALL PLUGS ARE AMP. P/N 205208-1    ufuG?fwbwb GrOt GSX G
 Gr Gr's Gr> GrB GrK Gr{K{B{?X{3{2 Gr{(| Ot G|L| ||?X{32{+W{B2{s{(2{s{sX5{sU{sS{sQ{sOQ{sM{sJ{sH{sFm{sD4{sA{s?{s={s;P{s9{s6{s4{s2l{s03:W*: $X|- $VC- $:U*: $:S|*: $T
- $Q- $:QC*: $:O
*: $O- $M_- $:L*: $:J*: $K&- $H- $:H_*: $:6*: $7%- $9^- $:8*: $:;	*: $;- $=- $:=B*: $:?{*: $BB- $:A*: $:C*: $D{- $F- $:F&*: $:4^*: $4- $2- $:2%*: $:/*: $0z- $+ $.*] $* $.Y9 $:? $s{s-{s+@	- $- k,P k{-l{,PBA $BA9 $DXA $B[C] $B- $rB-9 $DX- $BA&] $@QAm k@Yd k@t. k@t. k{B?{B={B;P{B9{B-{B6{B4{B2l{B03{BY{BX5{BU{BS{BQ{BOQ{BM{BJ{BH{BFm{BD4{BA|'s|'s%|'sz|'s":,P kO:? ks        R        TVm$Κ               tΰν                     (JasmineABravo.PRESS                       (JasmineManual.PRESS                       (ScannerCable.PRESS                          d          F     F  BootMesa.Scratch.                                      Jasmine Scanner Manual Appendix26A1.8 TC200 Paper Transport ModificationsXEROXFileProjectDesignerRevDatePageParc CSLJasmineTransport modsMalesonA1/2/80leading edge ofcutouts to bebeveled to matchtrailing edge bevelto be removedrear sectionthree descendingtabs to beremovedTransportMods.SIL08Red areas indicate sections to be modified on TC200 Transport assembly    ufuG?fwb(ZJ+Wr!W7U%  U- r!A! G" G ,& 7  7H  7s  6  6 ]  7s  7,  k7,  k7mH  k7&  k6  k6t!3  k6P!  k ] k@ k@H k@ k@l k k@% k ks k@ k@k k@s  k k G!W9  k k!V k k! k k!3 k kEr :Er !Er (Er /;Er !W$   F&r $F& $]H_ $FI $9:F& $]:H_r $FI $9:F& $!FI $9!F&r $&WF& $]!H_ $(FI $9(F&r $-F& $](H_ $/;FI $9/;F&r $3F& $]/;H_ $;tH $I $Q $O $9Or $O $]Q9 $:O $9:Or $O $]Q9 $!O $9!Or $&WO $]&WQ9 $(O $9(Or $-O $]-Q9 $/;O $9/;Or $3O $]3Q $:XQ $y2U& $2T- $0WT
] $0WT
 $ $+U& $+T- $)T
] $)T
 $ $%:U& $%:T- $#T
] $#T
 $ $U& $T- $WT
] $WT
 $ $U& $T- $T
] $T
 $ $U&	 $Q $UT- $WT- $#T- $)T- $0WT- $Z& $^+W $9;ZJ $r9;Z&9 $;tU $r;tU $BH $V;tH_ $;t;- $V&W;	A $&W;	 $%>  $%> $"sEy $"s;- $
"s;	  $#7 $U!W7 $!W7 $y;	y $;	 $]=B] $6 $6@ $6 $@V7y $V7 $
$VAU $7I $
;tAU $>7 $
 ;t7y $;t7 $yBD $rAC  $AC $]@tF&@ $@tF& $]Qf $QC $:Bf $ BB $$:QC  $AI $BB  $V= $r:=@ $:= $@tT- $@tT
 $AJ- $
 @tJ	@ $@tI $=Hy $=H $@<J	 $
$<T
 $=T
 $@=U&U $<J	 $;tGf $r:QC $Y
@ $:XU& $:XY
 $:XQf $ :XQC $:W. $:X|. $Z& $$X| $$Z&  $%:X $sX| $sZ&  $X $8X| $8Z&  $8X $	8e  G
8 G G
8 G G	8 $ $
H8 $ $
H8B $ $	8B $ $	@ $ $
H@ $ $
HA& $ $	A& $ $
@ G G
A& G G	@  G	?4  G
?{ G G
> G G	?{ $ $
H?{ $ $
H? $ $	? $ $<@  G<A G G<@t G G<A $ $=A $ $=@ $ $<@ $ $<8B $ $=8B $ $=8 $ $<8 $ $<8 G G<8 G G<8e  G<=f  G<= G G<= G G<= $ $== $ $==B $ $<=B $ $-G $ $.eG $ $.eH; $ $-H; $ $.G G G.H; G G-G  GVG  GG G GGf G GzG $ $G $ $G $ $zG $ $8F $ $8F $ $8G $ $8G $ $8F G G8G G G8fF  G9N  G:NX G G:M G G9NX $ $:XNX $ $:XM $ $9M $ $:I $H. $L. $9E	 $9? $8?{@ $8?{ $9F  $:XG $9FI $ 8F& $:XF $9G $ k9G k $AIX k $A&I4 $ kA&T $ kAU k $<U k $<&T $ k<&I4 $ k<IX k $8C  $8A $98A  $Vzr $z $	 ]  $V ] $@!z $y:$ $: $9V $V $$ $)A  $V$ $r)A $-@ $  $V ]  $V( $(H $ (%) $8$ $8)A $9$ $r9' $;t' $9)e $r9- $7, $7,, $ 7,	 $7T
y $7S $ 7S|U $;t' $<& $ <&z $@t&z $ @t' $B! $A!z  $A!z $@@t"@ $@t" $]?Xz $@;t $;t $;t ] $< ] $:Xz  $<$ $<!z9 $>!z $y>" $V%+W $V&z+W $& $ % $ W& $ % $ #& $ %:& $ )& $ +& $ 0W& $ 2& $ 1t  $U- ] $- ] $y0{!3 $ k0W!V k $&W  $U% ]  $% ] $y#! $9"s $!W@ $&W# $$r $!W%^ $## $%$ $%# $&W# $#$A $## $&W" $1t" $, k, k , k , k #, k (, k 2, k #" $$ k$ k$ k$ k#$e k($ k-$ k2$ k7$ kz@ $ $  $z  $V $ " ${r}(2  Gr}}3}?X}B}KK  GrB  Gr>  Gr's  Gr
  Gr O GSX  G Ot G  Gr}r{  Gr{:{4;{?{C;-, kU $ k $ k $ k  $ k  $ k s $ k ^ $ k :H $ k 3 $ ! $ k!3] $ k! $ kA!3 $ ke  $ k ] $ k" $ k"s $ k" $ k#H $ k# $ $#l $ $A#% $ $#H $ $e# $ $" $ $" $ $" $ $"s $ $ "O $ $ ^" $ $ :", $ $ ! $ $ ! $ $ !z $ $ ! $ $!3!3 $ $" $!W! $r6#H $ k6" $ k7" $ k6"s $ k7&! $ k7I!3 $ k7 ] $ k7m  $ k7 $ k83 $ k8 $ k8 $ k8s $ k8 $ k8BH $ k7 $ k7 $ k9 $ k9;] $ k9 $ k9_ $ k9 $ k9 $ k: $ k9H $ k:4s $ k8f $ k:# G $:X $9:{$ $#H $ k" $ kA"s $ kd" $ k!3 $ k  $ k! $ kk $ k $ $$ $ HA $  $ kz $ kV $ k $ kO $ k] $ k $ k+3 $ k $ ks $ ks $ kH $ ks $ k $ k3H $ k ] $ k$ $ kH $ k  $V!z  $V $#O $"s!z  $!W $ k  $ !!V $ ${CG{CE{CD4{CB{C\{C]{DX{DX
{DX3!W ${({M<{kF        l        TVm$Κ                tΰν                     (JasmineABravo.PRESS                       (JasmineManual.PRESS                       (TransportMods.PRESS                         d          F     F  BootMesa.Scratch.                                                                            Jasmine Scanner Manual Appendix27Appendix 2. PROM MicrocodeA2.1PROM Blowing ProcedureBoth PROMs are blown with the Prolog PROM blower.  The Harris HM7603 32x8 PROM requiresthe PM9039 Personality Module, the PA16-2 Adaptor, and the 32x8(H) Configurator.  The TexasInstruments 74S472 512x8 PROM requires the PM9046 Personality Module, the PA20-1 Adapter,and the 512x8(L) Configurator.The easist way to blow a set of PROMs is to copy an existing PROM.  If you need to blow PROMsfrom scratch, you will need:[IVY]<Jasmine>JasProm.MB[???]<???>PNew.RUN.The command lines for the 74S472 and HM7603 respectively are:PNew jasprom.mb/f 22/t StateMem/m 0/c 0/b 0/a 0/sPNew jasprom.mb/f 7/t ControlMem/m 0,1,2,3,4/p 0/c 0/b 0/a 0/s.    ufuG?f Xq!bw_ w_ u\D u;3\ uZ) u'|Z2 uY1 u.FY( uW uTyJ u:Ty uRu2Qqu2OuNi=u2L1u2Ka?                TVm$ zΚ      -         tΰν                Jasmine Scanner Manual Appendix28A2.2Microcode ListingTo produce JasProm.MB from the following source code, you will need:[MAXC]<Alto>BCPL.RUN[???]<???>RomDef.RUN.The command lines necessary are:BCPL.RUN JasminePromGen.BCPL//produces JasminePromGen.BRRomDef.RUN JasProm.MB JasminePromGen.BR.//J A S M I N E  P R O M  G E N//// generate PROMs for Jasmine scanner//RomDef jasprom.mb jasminepromgen.br//pnew jasprom.mb/f 22/t StateMem/m 0/c 0/b 0/a 0/s//pnew jasprom.mb/f 7/t ControlMem/m 0,1,2,3,4/p 0/c 0/b 0/a 0/s//12/13/78: first try//12/21/78: modify control mem to fix inverted signals//12/28/78: modify state mem for additional recharge cycle//(useless)//1/25/79: modify control mem to fix initialization sequence//1/27/79: modify control mem for inverted sample/delay clocks//modify state mem to remove additional cycle on recharge//4/30/79: fix Load sequence to access first, last locations//1/24/80: hold DCRestore high while A/D conversion is taking//place because there seems to be charge leaking into the//analog switch when DCRestore is low, even though the//AnalogOn' signal is high (shouldn't happen but does)//3/10/80: four cycle Recharge////The Alto supplies 8 data bits, and receives 8 data bits + ready flag from Jasmine//Data bits: 3 bits are decoded into 8 states://{Start',Load',Forward',Back',WE1',WE2',WE3',unused'}//1 bit enables the decode chip, and 4 bits are data//Forward',Back' are stepper motor drive signals//WE1',WE2',WE3' are write enables to the three 4x1024 RAMs//Input bits: two locations are used (both reading from XBUS)//one is "SafeLoc" (no state change caused by access)//the other is "StepLoc" (reading causes the FIFO to shift out)//PROM initialization//The PROM has 4 possible places it may be looping at startup://<Wait>,<Scan>,<Load>,<Init>//To go from <AnyState> to <Wait>, do://pulse Load', then pulse Start'//causing the following state transitions// currentState  Load' 0   Start' 0  Start' 1//--------------|---------|---------|---------//   <Wait>     | <Load>  | <Init2> |  <Wait>//   <Load>     | <Load>  | <Init2> |  <Wait>//   <Scan>     | <Init1> | <Init2> |  <Wait>//   <Init1>    | <Init1> | <Init2> |  <Wait>//   <Init2>    | <Init2> | <Init2> |  <Wait>//To load the scale/offset ROMs, Pulse LoadPrime to advance the address counters,//and then each 4-bit nybble is written by the appropriate WE signal and data//To Scan, pulse StartPrime//let count=0//until count eq nSamplesPerScanLine do// [ data!count=@SafeLoc repeatuntil data!count ls 0// [ count=count+1//  data!count=@StepLoc// ] repeatuntil data!count ge 0// ]////outgoing proceduresexternal [ RomDef  ufuG?fwbwbu_Du2]u2\uZ  u2Yu' Y
 u-Yu2W( FtTtS_tR"%tO%tNi3tM,@tJtIs6tH6:tFt(F	tE<tD}>tC@t(C@7tB<t@=t?t(?7t>Jt(>J4t=t(=4t;t:t9TSt8.t6t264t54t4^t24^.t3 t23 9t1=t0t203t/ht2/h=t,t+>t*rt*rt)4&t't't&)t%|-t$>.t#-t!-t -tH-t-tQtRMttt\'t4tt2tt2tft2ft)ttpt
3        
<        TVm$Κ      /         tΰν         F             (JasmineABravo.PRESS                       (JasmineManual.PRESS                       (TransportMods.PRESS           Jasmine Scanner Manual Appendix29 ]//incoming proceduresexternal [ WriteMem ]//internal manifest and structure declarationsstructure [ blankbit 7StartPrimebitLoadPrimebitSamplebitScanDonebitStatebit 5 ]structure [ blankbytebyteScanClkPrimebitRechargebitAnalogOnPrimebitDCRestorebitResetADPrimebitResetCtrsPrimebitScanStartbitblankbit ]//manifest names for state numbersmanifest [ WAIT=0SCAN1=1SCAN2=2SCAN3=3SCAN4=4SCAN5=5SCAN6=6SCANLOOP1=7SCANLOOP2=8SCANLOOP3=9SCANLOOP4=10SAMPLE1=11SAMPLE2=12SAMPLE3=13SAMPLE4=14SAMPLE5=15SAMPLE6=16SAMPLE7=17SAMPLE8=18SAMPLE9=19SAMPLE10=20SAMPLE11=21SAMPLE12=22FREESTATE=23LOAD1=24LOAD2=25LOADLOOP1=26LOADLOOP2=27LOADLOOP3=28LOADLOOP4=29INIT1=30INIT2=31 ]let RomDef() be [ let S147Mem=vec 512//Signetics 512x8 PROMlet HM7603Mem=vec 32//Harris 32x8 PROM//input variables are: StartPrime,LoadPrime,Sample,ScanDonefor State=0 to 31 do for Start=0 to 1 do  for Load=0 to 1 do   ufuG?f Ft(bAt_t^t(]KtZ.tY	tXUtXUt2W
tWt2U	tUt2TtTt2S_tS_t2R"tR"tPtNi	tM,tM,t2KtKt2JtJt2IstIst2H6	tH6t2FtFt2EtEt2D}	tD}t2C@tC@tBt?"t>Jt=	t2;t2:t29Tt28t26t25t24^t23 t21t20t2/h
t2.*
t2,
t2+
t2*r
t2)4
t2'
t2&
t2%|
t2$>t2#t2!r2 t2Ht2t2t2t2Rt2t2t2t\tttt2ftft2;t2t2pt2
3                TVm$Κ      6         tΰν         F             (JasmineABravo.PRESS                       (JasmineManual.PRESS                       (TransportMods.PRESS                         d          F     F  BootMesa.Scratch.                                                                                            Jasmine Scanner Manual Appendix30for Sample=0 to 1 do for ScanDone=0 to 1 do  [ //set up Signetics PROM addresslet Saddr=StateSaddr<<StartPrime=not StartSaddr<<LoadPrime=not LoadSaddr<<Sample=SampleSaddr<<ScanDone=ScanDone//set up default values of output parameterslet nextState=State+1let ScanClk=0let Recharge=0let AnalogOn=0 //analog switch enablelet DCRestore=0let ResetAD=0let ResetCtrs=0let ScanStart=0switchon State into [ case WAIT: //standard wait state: branch on Start or Loadif Start&Load then[ nextState=WAIT;endcase] //NEVER HAPPENSif Start then [ nextState=SCAN1;endcase]if Load then [ nextState=LOAD1;endcase]nextState=WAITendcase//for reading a sample://pulse ScanClk//wait 500nsec for detector output//hold AnalogOn for 1 us (to transfer charge to hold register)//StartAD// wait 9 clock times for AD to complete, during which//Recharge+DCRestore//DCRestore+AnalogOn for 1 us (to do DCRestore)//DCRestore(to avoid glitches from analog switch)  case SCAN1: //set up for array startScanStart=1if Load then nextState=INIT1endcase  case SCAN2: //array start, (resetctrs for ScanClk)ResetCtrs=1ScanStart=1//array starts on falling edge of clockif Load then nextState=INIT1endcase  case SCAN3: //array start goes away while clock lowScanClk=1//counter reset on rising edge of clockResetCtrs=1if Load then nextState=INIT1endcase  case SCAN4: //delay for first "real" clock pulseif Load then nextState=INIT1endcase  case SCAN5: if Load then nextState=INIT1;endcase  case SCAN6: if Load then nextState=INIT1;endcase  case SCANLOOP1: //until ScanDone do . . .DCRestore=1//1/24/80 --last cycle of previous A/DScanClk=1if Load then [ nextState=INIT1;endcase]if ScanDone then nextState=WAIT//loop exitendcase  case SCANLOOP2: //wait 500 nsec after trailing edge of ScanClkif Load then nextState=INIT1endcase  case SCANLOOP3: //decide whether to use sample, or skipif Load then [ nextState=INIT1;endcase]if Sample then nextState=SAMPLE1 //do the sampleendcase case SCANLOOP4: //rechargeRecharge=1nextState=SCANLOOP1    ufuG?f FtbAtat_#t(^t(]Kt(\t(Zt(Yt(W,t(Ut(Tt(S_t(R"%t(Pt(Ot(Nit(M,t(KtJt(JyJ,tIstH6rH6t!fH6tFrFt%XF	tErCEt%E	rD}tC@t@t?t2?t>Jt2>J t=t2=<t;t2;t:6t9Tt9Tt8t8-t6t6	t6&t(4^yX4^t3 t1r1t0t(/hyX/h$t.*t,t,y.,%t+r+t*rt()4yX)4%t'	t'y.'%t&t%|r%|t$>t(#yX#"t!r!t t(Hr IHt(Ht(r It(t(yott&tR	trCt$	trt){tt(\yo\,trtt(yo%tfrCft$f	t)r)t')y))tt(y)tp
r
3                TVm$"Κ      :         tΰν         F             (JasmineABravo.PRESS                       (JasmineManual.PRESS                       (TransportMods.PRESS                         d          F     F  BootMesa.Scratch.                                                                                                                                                                                                                          Jasmine Scanner Manual Appendix31if Load then nextState=INIT1endcase  case SAMPLE1: //Grab output voltage in hold registerAnalogOn=1if Load then nextState=INIT1endcase  case SAMPLE2:AnalogOn=1if Load then nextState=INIT1endcase  case SAMPLE3:AnalogOn=1if Load then nextState=INIT1endcase  case SAMPLE4:AnalogOn=1if Load then nextState=INIT1endcase  case SAMPLE5://reset presented to SARResetAD=1if Load then nextState=INIT1endcase  case SAMPLE6://Q7 low, Q6-Q0 highRecharge=1DCRestore=1if Load then nextState=INIT1endcase  case SAMPLE7://Q7 correct,Q6 low, Q5-Q0 highAnalogOn=1Recharge=1//3/10/80DCRestore=1if Load then nextState=INIT1endcase  case SAMPLE8://Q7-Q6 correct,Q5 low, Q4-Q0 highAnalogOn=1Recharge=1//3/10/80DCRestore=1if Load then nextState=INIT1endcase  case SAMPLE9://Q7-Q5 correct,Q4 low, Q3-Q0 highAnalogOn=1Recharge=1//3/10/80DCRestore=1if Load then nextState=INIT1endcase  case SAMPLE10://Q7-Q4 correct,Q3 low, Q2-Q0 highAnalogOn=1DCRestore=1if Load then nextState=INIT1endcase  case SAMPLE11://Q7-Q3 correct,Q2 low, Q1-Q0 highDCRestore=1if Load then nextState=INIT1endcase  case SAMPLE12://Q7-Q2 correct, Q1 low, Q0 highDCRestore=1//1/24/80if Load then nextState=INIT1nextState=SCANLOOP1//finish AD while reading next sampleendcase  case LOAD1: //load scale/offset RAMSResetCtrs=1ScanClk=1if Start then nextState=INIT2endcase  case LOAD2: //counter load on clock rising edgeResetCtrs=1//wait here until Load goes low (to access 0th location) [4/30]if Load do nextState=LOAD2if Start then nextState=INIT2endcase  case LOADLOOP1: //step counter on every Load pulse   ufuG?f FtbArbAtat(_y_$t^
t]Kr]Kt\t(ZtY
tXUrXUtWt(UtT
tS_rS_tR"t(PtO
tNirNitM,t(KtKy.KtJ	tIsrIstH6t(FtFy.FtE
tD}tC@rC@tBt(@t@y.@t?
t>J
t>J	t=t;r;t:t(9Tt9Ty.9T t8
t6
t6	t5t4^r4^t3 t(1t1y.1 t0
t/h
t/h	t.*t,r,t+t(*rt*ry.*r t)4
t't&r&t%|t($>t$>y.$> t#t!r!t t(HtHy.Htt	trrt$y%#tRt(ytt\	trztt(y!tfr)?rtrztpt(
3y
3         0        TVm$Κ      A         tΰν         F             (JasmineABravo.PRESS                       (JasmineManual.PRESS                       (TransportMods.PRESS                         d          F     F  BootMesa.Scratch.                                                                                                                                                                                    Jasmine Scanner Manual Appendix32if Start then [ nextState=INIT2;endcase]unless Load do nextState=LOADLOOP1endcase  case LOADLOOP2:ScanClk=1if Start then nextState=INIT2endcase  case LOADLOOP3:if Start then [ nextState=INIT2;endcase]if Load then nextState=LOADLOOP3endcase  case LOADLOOP4:if Start then [ nextState=INIT2;endcase]//we miss the last location with this here code [4/30]if ScanDone then nextState=WAITnextState=LOADLOOP1endcase  case INIT1: //wait for Startif Start then [ nextState=INIT2;endcase]nextState=INIT1endcase  case INIT2: //wait for Start to fallif Start then [ nextState=INIT2;endcase]nextState=WAITendcase  default: nextState=WAITendcase]let Scommand=0Scommand<<ScanClkPrime=not ScanClkScommand<<Recharge=RechargeScommand<<AnalogOnPrime=not AnalogOnScommand<<DCRestore=DCRestoreScommand<<ResetADPrime=not ResetADScommand<<ResetCtrsPrime=not ResetCtrsScommand<<ScanStart=ScanStartS147Mem!Saddr=nextStateHM7603Mem!State=Scommand  ] //end of nested for loopsWriteMem(S147Mem,"StateMem",8,511)WriteMem(HM7603Mem,"ControlMem",8,31)  ]    ufuG?f FtbArbAt$bA	tarat_t(^t]K	t\rz\tZt(YtXUrXUt$XU	tWrWtUt(TtS_rS_t$S_	rR"6tPrPrOtNit(KyKtJrJt$J	rIstH6t(FyFtErEt$E	rD}tC@t(BrBt@t(?t(>Jt(="t(;t(:$t(9Tt(8"t(6&t(5t(4^t(3 t1t20"t2/h%t.*        "        TVm$"Κ      G         tΰν         F             (JasmineABravo.PRESS                       (JasmineManual.PRESS                       (TransportMods.PRESS                         d          F     F  BootMesa.Scratch.                                                                                                                                                              Jasmine Scanner Manual Appendix33Appendix 3. RevisionsA3.1REV Gb: modifications to original PC boardsAnalog BoardConnect IC4 pin 21 to 22Cut trace to IC2 pin 5 (was connected to -5V)Connect IC2 pin 5 to C14 (GND)(C14 is now useless with both legs connected to GND)Add .1uF cap on IC8 from pin 5 to 8Add .01uF cap on IC5 from pin 1 to 13Remove resistors R20 and R21Add 10K pot with adjusting screw at top as follows:top leg to top hole of R21middle leg to bottom hole of R21bottom leg to top hole of R20(no connection to bottom hole of R20)initial setting is about 5KSubstitute 1M resistor for R12 (marked 80K)Substitute 820 ohm resistor for R10 (marked 5.1K)(NOTE: this resistor is the final gain set.  Increasing theresistance will increase the output values)Digital Boardreverse both 6.8uF caps (pc artwork is backwards)Cut the etch from Cable connection 19 to #6B pin 5Add wire from #1B pin 5 to #6B pin 5Add wire from #1B pin 1 to #1B pin 4Add wire from #1B pin 4 to #1B pin 14Add wire from #1B pin 3 to #3B pin 9Add wire from #1B pin 2 to Cable connection 19D0 NOTE: The D0 provides TTL termination on its printer port,but the F3341 FIFO is a MOS device.  For proper D0 operation,replace the F3341 with the pin-compatible MMI67401 TTL FIFO.The MMI67401 will work on Altos, but costs ten times as much.NOTE: #1B Must be an S74, not LS as indicated#6B may want to be an S138, although the twisted pair cable andsynchronizer modifications should allow the LS138 to work.Light BarRemove center two bulbsAdd foam tape to front of light bar base, to elevate lights    ufuG?f Xq#bu_ w_+wYu2Uu2Ty-u2RuQq4u2O#u2Ni%u2Lu2Ka3uIuHY uFuEQ%uCu2BI+u2@1u?A;u=+ Xw7u241u23 2u21$u20$u2.%u2-$u2+.u2(=u2' =u2%|<u2#=u2 -u2k?u2:w[	u2Su2;                TVm$ Κ      K          tΰν         X             (Ja    LOGO







        
TIMESROMANZ   
     
TIMESROMANx          	HELVETICA       @         
TIMESROMANDESTFONT         
TIMESROMAN            
     GRAY                      
TIMESROMAN




  
     HIPPOial = rang   
    	 
TIMESROMAN




      
 ARROWS    P 0        
     	HELVETICA     d        	HELVETICA           
     	HELVETICALv       GATES                       TEMPLATE





   @                     $ 
    .  o   6     A     L     O  B   W 
    a     d  f   l 	    u  v    	                     K              
         {           -    /  `  6    :    A    G    K  & O  Κ      O    "    tΰν         X             (JasmineABravo.PRESS                       (JasmineManual.PRESS                       (TransportMods.PRESS                         d          F     F  BootMj/R "P   }   t                                                                                                                                                                                                                                      JasmineManual.PRESS                                Maleson                        12-Aug-80 15:38:45                                                                                                                                                         